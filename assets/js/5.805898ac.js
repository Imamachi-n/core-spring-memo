(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{151:function(t,a,s){t.exports=s.p+"assets/img/C001_DI.83f1d512.png"},152:function(t,a,s){t.exports=s.p+"assets/img/C009_1_DI.e036f09e.png"},153:function(t,a,s){t.exports=s.p+"assets/img/C010_1_DI.1a08c3c9.png"},154:function(t,a,s){t.exports=s.p+"assets/img/C011_1_DI.d91cfbdf.png"},172:function(t,a,s){"use strict";s.r(a);var n=[function(){var t=this.$createElement,a=this._self._c||t;return a("h1",{attrs:{id:"spring-conteiner-dependency-injection"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spring-conteiner-dependency-injection","aria-hidden":"true"}},[this._v("#")]),this._v(" Spring Conteiner, Dependency Injection")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"dependency-injectionとその利点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dependency-injectionとその利点","aria-hidden":"true"}},[this._v("#")]),this._v(" Dependency Injectionとその利点")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Dependency Injection (DI)は「依存性の注入」と訳される。"),a("br"),this._v("\n必要なインスタンス（依存性）を"),a("strong",[this._v("外から代入")]),this._v("することで、各モジュールが疎結合になるように設計する。"),a("br"),this._v("\n硬い言葉で表現すると、あるオブジェクトに対して、利用（依存）しているオブジェクトを注入することで、オブジェクト間の依存関係を作成する。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("img",{attrs:{src:s(151),alt:"C001_DI"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("ul",[a("li",[this._v("クラス間・Layer間を疎結合化できる。")]),a("li",[this._v("Unitテストがしやすくなる（Testabilityの向上）")]),a("li",[this._v("インスタンスの差し替えなどが可能となる（例えば、テスト時に開発系・テスト系・本番系のデータアクセスクラスを用意してDIしたり）。")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"spring-frameworkにおけるdiの方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spring-frameworkにおけるdiの方法","aria-hidden":"true"}},[this._v("#")]),this._v(" Spring FrameworkにおけるDIの方法")])},function(){var t=this.$createElement,a=this._self._c||t;return a("ol",[a("li",[this._v("Javaコンフィグファイル")]),a("li",[this._v("アノテーション")]),a("li",[this._v("XML (→古いのでほとんど使われない)")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"danger custom-block"},[a("p",{staticClass:"custom-block-title"},[this._v("注意")]),a("p",[this._v("XMLによる設定はすでにレガシーなので、原則的には使わないようにしましょう。")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考","aria-hidden":"true"}},[this._v("#")]),this._v(" 参考")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"パターン・アンチパターンとは。diとはパターンなのか？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#パターン・アンチパターンとは。diとはパターンなのか？","aria-hidden":"true"}},[this._v("#")]),this._v(" パターン・アンチパターンとは。DIとはパターンなのか？")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("アンチパターンとは、推奨されない設計のことを指す。"),a("br"),this._v("\nDIも設計パターンの一部と言える。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"インターフェイスとその利点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#インターフェイスとその利点","aria-hidden":"true"}},[this._v("#")]),this._v(" インターフェイスとその利点")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"_1-jdk-proxy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-jdk-proxy","aria-hidden":"true"}},[this._v("#")]),this._v(" 1. JDK Proxy")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("インターフェイスを実装したクラスにインジェクション（Spring FrameworkだとこちらがDefault。インターフェイス持たないクラスの場合、CGlib Proxyに処理を委譲する仕組みになっている）"),a("br"),this._v("\n当たり前だが、インターフェイスを持たないクラスをProxy化することはできない。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"_2-cglib-proxy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-cglib-proxy","aria-hidden":"true"}},[this._v("#")]),this._v(" 2. CGlib Proxy")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("スーパークラスを継承したクラスにインジェクション（Spring BootだとこちらがDefault）"),a("br"),this._v("\nスーパークラス側で"),a("code",[this._v("final")]),this._v("のついたクラス・メソッドは継承・オーバーライドができないため、それらのクラスはProxy化することができない。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"spring-beansでインターフェイスの利用が推奨される理由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spring-beansでインターフェイスの利用が推奨される理由","aria-hidden":"true"}},[this._v("#")]),this._v(" Spring beansでインターフェイスの利用が推奨される理由")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"application-contextとはspringが管理するコンテナのこと"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#application-contextとはspringが管理するコンテナのこと","aria-hidden":"true"}},[this._v("#")]),this._v(" application-contextとはSpringが管理するコンテナのこと")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("img",{attrs:{src:s(152),alt:"C009_1_DI.png"}})])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TransferServiceImpl")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TransferService")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("// Needed to perform moneytransfers between accounts")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("TransferServiceImpl")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AccountRepository ar"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accountRepository "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" ar"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("JdbcAccountRepository")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("AccountRepository")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("// Needed to load accounts from the database")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("JdbcAccountRepository")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DataSource ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dataSource "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ApplicationConfig")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" TransferService "),s("span",{attrs:{class:"token function"}},[t._v("transferService")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TransferServiceImpl")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function"}},[t._v("accountRepository")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" AccountRepository "),s("span",{attrs:{class:"token function"}},[t._v("accountRepository")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("JdbcAccountRepository")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function"}},[t._v("dataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" DataSource "),s("span",{attrs:{class:"token function"}},[t._v("dataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        BasicDataSource dataSource "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" New "),s("span",{attrs:{class:"token class-name"}},[t._v("BasicDataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setDriverClassName")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"org.postgresql.Driver"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setUrl")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"jdbc:postgresql://localhost/transfer"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setUsername")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"user"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setPassword")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"password"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// Create the application from the configuration")]),t._v("\nApplicationContext context "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" \n    SpringApplication"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("run")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" ApplicationConfig"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// Look up the application service interface")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v('// "transferService"がBean IDとなる。')]),t._v("\nTransferService service "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" \n    context"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getBean")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“transferService”"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" TransferService"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// Use the application")]),t._v("\nservice"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("transfer")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("MonetaryAmount")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“"),s("span",{attrs:{class:"token number"}},[t._v("300.00")]),t._v("”"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" “"),s("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("”"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" “"),s("span",{attrs:{class:"token number"}},[t._v("2")]),t._v("”"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// No need for bean id if type is unique")]),t._v("\nTransferService ts3 "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" context"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getBean")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TransferService"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"junitのテストクラス作成（diしない場合の例）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#junitのテストクラス作成（diしない場合の例）","aria-hidden":"true"}},[this._v("#")]),this._v(" JUnitのテストクラス作成（DIしない場合の例）")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TransferServiceTests")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" TransferService service"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@BeforeEach")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("setUp")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token comment"}},[t._v("// Create the application from the configuration")]),t._v("\n        ApplicationContext context "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("\n            SpringApplication"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("run")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" ApplicationConfig"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{attrs:{class:"token comment"}},[t._v("// Look up the application service interface")]),t._v("\n        service "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" context"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getBean")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TransferService"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("moneyTransfer")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        Confirmation receipt "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("\n            service"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("transfer")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("MonetaryAmount")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"300.00"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"1"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"2"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        Assert"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("assertEquals")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"500.00"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" receipt"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getNewBalance")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"複数ファイルからapplicationcontextを作成する"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#複数ファイルからapplicationcontextを作成する","aria-hidden":"true"}},[this._v("#")]),this._v(" 複数ファイルからApplicationContextを作成する")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("@Configuration")]),this._v("アノテーションを付けたクラスは長くなりがちなので、分割しておくことができる。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("特定のConfigクラスを読み込むには、"),a("code",[this._v("@Import")]),this._v("アノテーションをつけて、読み込むクラス名を指定する。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("大元のConfigクラス。"),a("code",[this._v("ApplicationConfig")]),this._v("クラスと"),a("code",[this._v("WebConfig")]),this._v("クラスをインポートしている。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Import")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ApplicationConfig"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" WebConfig"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("InfrastructureConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ApplicationConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("WebConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("Application")]),this._v(" Beansと"),a("code",[this._v("Infrastructure")]),this._v(" Beansを分離しておくのがBest Practices。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("img",{attrs:{src:s(153),alt:"C010_1_DI.png"}})])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ApplicationConfig")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" TransferService "),s("span",{attrs:{class:"token function"}},[t._v("transferService")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TransferServiceImpl")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function"}},[t._v("accountRepository")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" AccountRepository "),s("span",{attrs:{class:"token function"}},[t._v("accountRepository")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("JdbcAccountRepository")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function"}},[t._v("dataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" DataSource "),s("span",{attrs:{class:"token function"}},[t._v("dataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        BasicDataSource dataSource "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" New "),s("span",{attrs:{class:"token class-name"}},[t._v("BasicDataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setDriverClassName")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"org.postgresql.Driver"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setUrl")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"jdbc:postgresql://localhost/transfer"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setUsername")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"user"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setPassword")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"password"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("以下に分割後の例を示す。"),a("br"),a("code",[this._v("ApplicationConfig")]),this._v("クラス内のBeanは、インポート先の"),a("code",[this._v("TestInfrastructureConfig")]),this._v("クラスのDataSourceのBeanに依存している。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("DataSourceのBeanを使うために、"),a("code",[this._v("@Autowired")]),this._v("アノテーションを使って、別のconfigクラスのBeanを取得する（これをインジェクションという）。コンストラクタでインジェクションするのが普通。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("ただし、configクラス内でコンストラクタが１つの場合、"),a("code",[this._v("@Autowired")]),this._v("アノテーションを省略することができる。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ApplicationConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("final")]),t._v(" DataSource dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("ApplicationConfig")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DataSource ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dataSource "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v(" \n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" TransferService "),s("span",{attrs:{class:"token function"}},[t._v("transferService")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TransferServiceImpl")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("accountRepository")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v(" \n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" AccountRepository "),s("span",{attrs:{class:"token function"}},[t._v("accountRepository")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DataSource dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("JdbcAccountRepository")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" dataSource "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Import")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ApplicationConfig"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TestInfrastructureConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v(" \n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" DataSource "),s("span",{attrs:{class:"token function"}},[t._v("dataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"beanのスコープ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#beanのスコープ","aria-hidden":"true"}},[this._v("#")]),this._v(" Beanのスコープ")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"singletonスコープ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#singletonスコープ","aria-hidden":"true"}},[this._v("#")]),this._v(" Singletonスコープ")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("デフォルトのスコープは"),a("code",[this._v("singleton")]),this._v("。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Scope")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“singleton”"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" AccountService "),s("span",{attrs:{class:"token function"}},[t._v("accountService")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("AccountService service1 "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AccountService"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" context"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getBean")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“accountService”"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nAccountService service2 "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AccountService"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" context"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getBean")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“accountService”"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("assert")]),t._v(" service1 "),s("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" service2"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// True – same object")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("ul",[a("li",[this._v("Springアプリケーションは複数リクエストに対して、マルチスレッドで処理。")]),a("li",[this._v("スレッドセーフでなければならない（Stateless・Immutable beans）。")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"protptypeスコープ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#protptypeスコープ","aria-hidden":"true"}},[this._v("#")]),this._v(" Protptypeスコープ")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Scope")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“prototype”"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" AccountService "),s("span",{attrs:{class:"token function"}},[t._v("accountService")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" …\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("AccountService service1 "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AccountService"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" context"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getBean")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“accountService”"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nAccountService service2 "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AccountService"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" context"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getBean")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“accountService”"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("assert")]),t._v(" service1 "),s("span",{attrs:{class:"token operator"}},[t._v("!=")]),t._v(" service2"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// True – different objects")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"spring側で用意されているスコープ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spring側で用意されているスコープ","aria-hidden":"true"}},[this._v("#")]),this._v(" Spring側で用意されているスコープ")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("table",[s("thead",[s("tr",[s("th",[t._v("スコープ名")]),s("th",[t._v("説明")])])]),s("tbody",[s("tr",[s("td",[t._v("singleton")]),s("td",[t._v("１つのインスタンスが作られる")])]),s("tr",[s("td",[t._v("prototype")]),s("td",[t._v("新しいインスタンスが毎回作られる")])]),s("tr",[s("td",[t._v("session")]),s("td",[t._v("新しいインスタンスがユーザごとに１つ作られる")])]),s("tr",[s("td",[t._v("request")]),s("td",[t._v("新しいインスタンスがリクエストごとに１つ作られる")])])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"環境設定（environmentオブジェクトとして読み込み）の読み込み"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#環境設定（environmentオブジェクトとして読み込み）の読み込み","aria-hidden":"true"}},[this._v("#")]),this._v(" 環境設定（Environmentオブジェクトとして読み込み）の読み込み")])},function(){var t=this.$createElement,a=this._self._c||t;return a("ol",[a("li",[this._v("Servlet Contextパラメータ（web.xml）")]),a("li",[this._v("JNDI (Java Naming and Directory Interface)")]),a("li",[this._v("JVMシステムプロパティ（java -Dxxx=yyy）")]),a("li",[this._v("OS環境変数（Cloudでよく使う）")]),a("li",[this._v("Javaプロパティファイル")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"環境変数の読み込み例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#環境変数の読み込み例","aria-hidden":"true"}},[this._v("#")]),this._v(" 環境変数の読み込み例")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DbConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    Environment env"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("DbConfig")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Environment env"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" env"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" DataSource "),s("span",{attrs:{class:"token function"}},[t._v("dataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        BasicDataSource ds "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("BasicDataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setDriverClassName")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" env"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getProperty")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"db.driver"')]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setUrl")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" env"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getProperty")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"db.url"')]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setUser")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" env"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getProperty")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"db.user"')]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setPassword")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" env"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getProperty")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"db.password"')]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v("db.driver=org.postgresql.Driver\ndb.url=jdbc:postgresql:localhost/transfer\ndb.user=transfer-app\ndb.password=secret45\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Javaプロパティファイルを読み込むには、"),a("code",[this._v("@PropertySource")]),this._v("アノテーションを用いてファイルパスを指定する。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@PropertySource")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"classpath:/com/organization/config/app.properties"')]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@PropertySource")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"file:config/local.properties"')]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ApplicationConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"環境変数（プロパティ）にアクセスする"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#環境変数（プロパティ）にアクセスする","aria-hidden":"true"}},[this._v("#")]),this._v(" 環境変数（プロパティ）にアクセスする")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("@Value")]),this._v("アノテーションを用いて、引数に値を代入することで、プロパティにアクセスすることもできる。Environmentオブジェクトをわざわざ用意する必要がなくなる。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DbConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" DataSource "),s("span",{attrs:{class:"token function"}},[t._v("dataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Value")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"${db.driver}"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" String driver"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Value")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"${db.url}"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" String url"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Value")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"${db.user}"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" String user"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Value")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"${db.password}"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" String pwd"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        BasicDataSource ds "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("BasicDataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setDriverClassName")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("driver"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setUrl")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setUser")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setPassword")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pwd"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"開発系・テスト系・本番系で環境変数（プロパティ）を変更する"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#開発系・テスト系・本番系で環境変数（プロパティ）を変更する","aria-hidden":"true"}},[this._v("#")]),this._v(" 開発系・テスト系・本番系で環境変数（プロパティ）を変更する")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("${ENV}")]),this._v("を変数にして、複数のプロパティファイルに対応できる。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@PropertySource")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"classpath:/com/acme/config/app-${ENV}.properties"')]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("開発系"),a("code",[this._v("app-dev.properties")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v("db.driver=org.postgresql.Driver\ndb.url=jdbc:postgresql://localhost/transfer\ndb.user=transfer-app\ndb.password=secret45\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("テスト系"),a("code",[this._v("app-qa.properties")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v("db.driver=org.postgresql.Driver\ndb.url=jdbc:postgresql://qa/transfer\ndb.user=transfer-app\ndb.password=secret88\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("本番系"),a("code",[this._v("app-prod.properties")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v("db.driver=org.postgresql.Driver\ndb.url=jdbc:postgresql://prod/transfer\ndb.user=transfer-app\ndb.password=secret99\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"プロファイルを用いてbeanをグループ化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#プロファイルを用いてbeanをグループ化","aria-hidden":"true"}},[this._v("#")]),this._v(" プロファイルを用いてBeanをグループ化")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Beanをプロファイルでグループ化することができる。"),a("br"),this._v("\nグループに属していないBeanは"),a("strong",[this._v("いつでも")]),this._v("使われる。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("img",{attrs:{src:s(154),alt:"C011_1_DI.png"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("@Profile")]),this._v("でJava configクラスがどのグループに属するか決められる（メソッド単位で付けられる）。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Profile")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"dev"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DevConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" DataSource "),s("span",{attrs:{class:"token function"}},[t._v("dataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    EmbeddedDatabaseBuilder builder "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("EmbeddedDatabaseBuilder")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" builder"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setName")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"testdb"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setType")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("EmbeddedDatabaseType"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HSQL"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("addScript")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"classpath:/testdb/schema.db"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("addScript")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"classpath:/testdb/test-data.db"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("build")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("開発用と本番用で同じBean ID名・異なるメソッド名を付けて、"),a("code",[this._v("@Profile")]),this._v("アノテーションで開発用と本番用を使い分ける。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DataSourceConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("// 開発用")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token string"}},[t._v('"dataSource"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Profile")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"dev"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" DataSource "),s("span",{attrs:{class:"token function"}},[t._v("dataSourceForDev")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        EmbeddedDatabaseBuilder builder "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("EmbeddedDatabaseBuilder")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" builder"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setName")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"testdb"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{attrs:{class:"token comment"}},[t._v("// 本番用")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token string"}},[t._v('"dataSource"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Profile")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"prod"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" DataSource "),s("span",{attrs:{class:"token function"}},[t._v("dataSourceForProd")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        BasicDataSource dataSource "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("BasicDataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"特定のプロファイル（グループ）から除外する"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#特定のプロファイル（グループ）から除外する","aria-hidden":"true"}},[this._v("#")]),this._v(" 特定のプロファイル（グループ）から除外する")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("!")]),this._v("を付けてプロファイルを指定することで、そのプロファイルから除外することができる。以下の例では、"),a("code",[this._v("dev")]),this._v("以外でBeanが使われる。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Profile")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"!dev"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DevConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    …\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"プロファイルを有効化する方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#プロファイルを有効化する方法","aria-hidden":"true"}},[this._v("#")]),this._v(" プロファイルを有効化する方法")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"jvmシステムプロパティ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jvmシステムプロパティ","aria-hidden":"true"}},[this._v("#")]),this._v(" JVMシステムプロパティ")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v("-Dspring.profiles.active=dev,jpa\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"java-config"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#java-config","aria-hidden":"true"}},[this._v("#")]),this._v(" Java config")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("System"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setProperty")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"spring.profiles.active"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"dev,jpa"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nSpringApplication"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("run")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AppConfig"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"テスト時"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#テスト時","aria-hidden":"true"}},[this._v("#")]),this._v(" テスト時")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("@ActiveProfiles")]),this._v("アノテーションを使う。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"プロパティファイルの選択（開発系・本番系）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#プロパティファイルの選択（開発系・本番系）","aria-hidden":"true"}},[this._v("#")]),this._v(" プロパティファイルの選択（開発系・本番系）")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"開発系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#開発系","aria-hidden":"true"}},[this._v("#")]),this._v(" 開発系")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("開発用のプロパティファイル"),a("code",[this._v("dev.properties")]),this._v("を読み込む。"),a("br"),this._v("\nプロファイルは"),a("code",[this._v("dev")]),this._v("を使う。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Profile")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“dev”"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@PropertySource")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" “dev"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("properties” "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DevConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" … "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"本番系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本番系","aria-hidden":"true"}},[this._v("#")]),this._v(" 本番系")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("開発用のプロパティファイル"),a("code",[this._v("prod.properties")]),this._v("を読み込む。"),a("br"),this._v("\nプロファイルは"),a("code",[this._v("prod")]),this._v("を使う。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Profile")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“prod”"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@PropertySource")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" “prod"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("properties” "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ProdConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" … "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"wip-積み残し課題"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wip-積み残し課題","aria-hidden":"true"}},[this._v("#")]),this._v(" [WIP] 積み残し課題")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ul",[s("li",[t._v("What is the concept of a “container” and what is its lifecycle?")]),s("li",[t._v("How are you going to create a new instance of an ApplicationContext?")]),s("li",[t._v("Can you describe the lifecycle of a Spring Bean in an ApplicationContext?")]),s("li",[t._v("How are you going to create an ApplicationContext in an integration test test?")]),s("li",[t._v("What is the preferred way to close an application context? Does Spring Boot do this for you?")]),s("li",[t._v("Dependency injection using annotations (@Component, @Autowired)?")]),s("li",[t._v("Component scanning, Stereotypes and Meta-Annotations?")]),s("li",[t._v("Are beans lazily or eagerly instantiated by default? How do you alter this behavior?")]),s("li",[t._v("What is a BeanFactoryPostProcessor and what is it used for? When is it invoked?")]),s("li",[t._v("Why would you define a static @Bean method?")]),s("li",[t._v("What is a ProperySourcesPlaceholderConfigurer used for?")]),s("li",[t._v("What is a BeanPostProcessor and how is it different to a BeanFactoryPostProcessor?")]),s("li",[t._v("What do they do? When are they called?")]),s("li",[t._v("What is an initialization method and how is it declared on a Spring bean?")]),s("li",[t._v("What is a destroy method, how is it declared and when is it called?")]),s("li",[t._v("Consider how you enable JSR-250 annotations like @PostConstruct and @PreDestroy? When/how will they get called?")]),s("li",[t._v("How else can you define an initialization or destruction method for a Spring bean?")]),s("li",[t._v("What does component-scanning do?")]),s("li",[t._v("What is the behavior of the annotation @Autowired with regards to field injection, constructor injection and method injection?")]),s("li",[t._v("What do you have to do, if you would like to inject something into a private field? Ho does this impact testing?")]),s("li",[t._v("How does the @Qualifier annotation complement the use of @Autowired?")]),s("li",[t._v("What is a proxy object and what are the two different types of proxies Spring can create?")]),s("li",[t._v("What are the limitations of these proxies (per type)?")]),s("li",[t._v("What is the power of a proxy object and where are the disadvantages?")]),s("li",[t._v("What are the advantages of Java Config? What are the limitations?")]),s("li",[t._v("What does the @Bean annotation do?")]),s("li",[t._v("What is the default bean id if you only use @Bean? How can you override this?")]),s("li",[t._v("Why are you not allowed to annotate a final class with @Configuration")]),s("li",[t._v("How do @Configuration annotated classes support singleton beans?")]),s("li",[t._v("Why can’t @Bean methods be final either?")]),s("li",[t._v("How do you configure profiles?, What are possible use cases where they might be useful?")]),s("li",[t._v("Can you use @Bean together with @Profile?")]),s("li",[t._v("Can you use @Component together with @Profile?")]),s("li",[t._v("How many profiles can you have?")]),s("li",[t._v("How do you inject scalar/literal values into Spring beans?")]),s("li",[t._v("What is @Value used for?")]),s("li",[t._v("What is Spring Expression Language (SpEL for short)?")]),s("li",[t._v("What is the Environment abstraction in Spring?")]),s("li",[t._v("Where can properties in the environment come from – there are many sources for properties – check the documentation if not sure. Spring Boot adds even more.")]),s("li",[t._v("What can you reference using SpEL?")]),s("li",[t._v("What is the difference between $ and # in @Value expressions?")])])}],e=s(0),o=Object(e.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[t._m(0),t._m(1),t._m(2),t._m(3),s("p",[t._v("DIを行うメリットとしては、")]),t._m(4),s("p",[t._v("などが挙げられる。")]),t._m(5),t._m(6),t._m(7),t._m(8),s("p",[s("a",{attrs:{href:"https://www.slideshare.net/masatoshitada7/30spring-5-spring-boot-2-103523666",target:"_blank",rel:"noopener noreferrer"}},[t._v("初めてでも30分で分かるSpring 5 & Spring Boot 2オーバービュー"),s("OutboundLink")],1)]),t._m(9),t._m(10),s("p",[t._v("従来型のクラス設計（Servlet、ビジネスロジック、DAO、DTO）は、お互いが密結合になりがち。\n結果として、改修を重ねるごとに改修の難易度が増す（ビジネスロジックの複雑化・肥大化が原因の1つ）。")]),s("p",[t._v("DIを利用したクラス設計を行うことで、上記の各クラスが疎結合化し、関心事の分離が可能となる。\n結果として、コードがスッキリする。")]),t._m(11),s("p",[t._v("DIを行う上で、インターフェイスの用意は必須と言える。")]),s("p",[t._v("（DIの利点ではないが）インターフェイスを用意することで、ポリモーフィズムの活用などでメリットが生まれる。")]),t._m(12),t._m(13),t._m(14),t._m(15),t._m(16),s("p",[t._v("Spring FrameworkではJDK Proxyがデフォルトとなっており、JDK ProxyによるProxy生成の前提条件として、インターフェースの実装があるため。")]),t._m(17),s("p",[t._v("SpringのConfigurationクラスやApplicationクラスをインスタンス化する（これらインスタンスのことをBeanと呼ぶ）と、SpringのコンテナであるApplicationContext下で管理される。")]),t._m(18),s("p",[t._v("Applicationクラスの例。")]),t._m(19),s("p",[t._v("Configurationクラス（Configuration Instructions）の例。")]),t._m(20),s("p",[t._v("実行クラスの例。")]),t._m(21),s("p",[t._v("BeanへのアクセスはBean IDがユニークである場合に限り、以下のようにBean IDを省略できる（基本的に、Bean IDはユニークであるように設計するため、以下の書き方が一般的）。")]),t._m(22),t._m(23),t._m(24),t._m(25),t._m(26),t._m(27),t._m(28),t._m(29),s("p",[t._v("インポートされるConfigクラスたち。")]),t._m(30),t._m(31),t._m(32),s("p",[t._v("以下に２つに分割する前の例を示す。")]),t._m(33),t._m(34),t._m(35),t._m(36),t._m(37),t._m(38),t._m(39),t._m(40),t._m(41),t._m(42),s("p",[t._v("インスタンスが作られるのは１回きり。２回目は同じインスタンスが使い回される。")]),t._m(43),t._m(44),t._m(45),t._m(46),s("p",[t._v("毎回新しいインスタンスが生成される。")]),t._m(47),t._m(48),t._m(49),s("p",[t._v("ほとんどの場合は、singleton。sessionを時々使う。他のスコープはまず使わない。")]),s("p",[t._v("prototypeの場合、Springのコンテナ管理外となる。その場合、生成されたBeanはJavaのガベージコレクション（GA）の対象となり、普通のJavaのインスタンスとして扱われる。")]),t._m(50),s("p",[t._v("以下の順番で、環境設定を読み込む（外から変えられるものから読み込まれる）。")]),t._m(51),t._m(52),s("p",[t._v("環境設定（app.properties）から取得した値を変数に格納して、引数として取る。")]),t._m(53),s("p",[t._v("app.properties")]),t._m(54),t._m(55),t._m(56),t._m(57),t._m(58),t._m(59),t._m(60),t._m(61),t._m(62),t._m(63),t._m(64),t._m(65),t._m(66),t._m(67),t._m(68),t._m(69),t._m(70),t._m(71),t._m(72),t._m(73),t._m(74),t._m(75),t._m(76),t._m(77),t._m(78),t._m(79),t._m(80),t._m(81),t._m(82),t._m(83),t._m(84),t._m(85),t._m(86),t._m(87),t._m(88),t._m(89),t._m(90),t._m(91),t._m(92),t._m(93),t._m(94)])},n,!1,null,null,null);a.default=o.exports}}]);