(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{161:function(t,a,s){t.exports=s.p+"assets/img/C001_DI.83f1d512.png"},162:function(t,a,s){t.exports=s.p+"assets/img/C009_1_DI.e036f09e.png"},163:function(t,a,s){t.exports=s.p+"assets/img/C010_1_DI.1a08c3c9.png"},164:function(t,a,s){t.exports=s.p+"assets/img/C011_1_DI.d91cfbdf.png"},165:function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAAEZCAIAAABpc2vCAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFiUAABYlAUlSJPAAABKHSURBVHhe7Z1BaCXHnYd1s26bi9EtG7KbyAlraWDJWyMw8SUhJAQbsSaGhGTeBsTAwmawYPHA7gw5JPMO2Z2Z0+CLdZu5PBAEJLOHMBexczG8S2AOOsxhDwZdDL7McfZf3f/3XnVVd7/W6+5SV+n78WFL3VXVXdX1vepuPeON14SQaIPAhEQcBCYk4iAwIREHgQmJOAhMSMTZmM1mu7u7G6lne3v72bNn2mlCUsmG2HtycvJ16jk7O9va2tJOE5JKzOqkczz1SE+104SkEgQmJOIgMCERB4EJiTgITEjEQWBCIg4CExJxEJiQiIPAhEQcBCYk4iAwIREHgQmJOG0Fnk3Ho5FpxGQ0Gk+mM91jMptOrN1mf2G3ZDaR3aPJLC86LzcvZlpfbJNCrSKNaKcJSSXGDZ3gl890bKpnYprkro2nujdz0yTfu1BxUcAkF1h3ZgW12HgyyVrP2tYPASP6+pEGtNOEpBLjhU7wyybXV1ZL/d1E1lFdPFXuwpIrC6pu1A2W5cuCi022sHqwNgZLfe00IanEaKET/JLJlSroa6Vqr7s9t7UophpcrJxvrDpck0h17TQhqcSYohP8cikzb5nKve6OUi8zy53K9cdrEqmunSYklcisXk/g9RZg9XC5B4EJaRGZ1azAhMQamdUhn4FzDa3tCExIi8isXlNgdbGo1Gw6Xf0W2q6CwIS0iMzqNQVeKCxalf4dWBWW3dne+R94HeMRmJD1I7N6bYEl9venMpHdb2I5X8Qq7pYgMCEtIrO6jcAxBYFJekFgQiIOAhMScRCYkIiDwIREHAQmJOIgMCERB4EJiTgbW1tb5+fnOsfTzcXFxebmpnaakFSy8fTpU5nZZiFOPXfv3tVOE5JKruauUnTSnwghLYLAhEQcBCYk4iAwIREHgQmJOAhMSMRBYEIiDgITEnEQmJCIg8CERBwEJiTiIDAhEQeBCYk4CExIxIle4FevXh0dHd2+/bv3fviuNEtIAnnnn35w69bB48ePv/rqK53oFYlb4OfPn9/Y/Yebv3r/weTjZyefvv76C4AEeP6Xo8cP7tz67Ydvbf/9559/rtO9LBEL/OC//+ud0Y0XX0ydzgMkw5fn//OTH7177+5/6KT3EqvAsvaKvU5vAZLkow9/+vTpE536xUQpsDz3vrX9nZd//bPTT4Ak+er/nsm99JdffqkCWIlS4AcPHtz+1186nQRImAeTj2/f/p0KYCVKgW/+5tdHj+85PQRImGcnn773w3dVACtRCnxj9+3Z2ROnhwAJI3fR3/jG36gAVqIU2FT3egiQNqXWIDBAHFxHgeVOe3fne1I++Wx/99t8lSVt5CqrAFYSF1jsPTk50f+9StI5Ozvb2nrT6T6kxHUUWErqBL8GaT4sECMInHgQOG0QOPEgcNogcOJB4LRB4MSDwGmDwIkHgdMGgRMPAqcNAjfIbDKSOuOp/hog3R2x+bBAjJjr6wWBi0FgGCrm+npB4GIQGIaKub5eELgYBIahYq6vFwQuBoFhqJjr6wWBi1nqNJuMzY8mo9F4OtMCi8xm0/FoXsIUmThFsqZGsnU2tZoqL1YQWNo1Jd2CKyOVnO5DSpjr6wWBi8l1GuVmipUSda8g1DQrNi8xF7noXC6w1s9bqiy2FHg6LinTLFLN6T6khLm+XhC4mFwnib3mqlTWKimL5Hhir8paz15Iy5qqLJZv0d3r2CuRmk73ISXM9fVyZQLfaxFT/c5BE6Skzu6GyRVyDSrxzo3tYZ7SpvyNi4p6kDXtlUhl55JDSpjr6+VqBFYR1430xBG1Cimps7thfA+z5Guw5/VsKo+3msw+X2C3qawlX2C9afeekC8Tqe9cckgJc329XI3ALdN8pkpJnd0NUyGwWrbUy3rFZWdtgceT7F8t1l8ETh1zfb0gcDEVAjsrsD4Uj6zHYL/i5QSWYtqqd/CmkbpO9yElzPX1gsDFlFuXb11szn8tLpZ+xfKmagS2PhjslhtHajrdh5Qw19cLAhejqhqjlotr7tVSK19gLdJW4Plv6yks9ZzuQ0qY6+sFgYvJBBrN/w6cvZzKfixz0xS0S0haCywp+SxoFqnkdB9SwlxfLwhcTC6w+GW+ZyW1s/hfnzIFrf3mm1qZd10IbMpkTZd8/as2UsXpPqSEub5eEDidIHDaIHDiQeC0QeDEg8Bpg8CJB4HTBoETDwKnDQInHgROGwROPAicNgiceBA4ba6jwFtbb56fn+sETzoXFxebm2843YeUuI4CP/3svkxrKX8dcvfOLaf7kBJyiVUAK4kLfCUM/PQgUhA4EAgMfYDAgUBg6AMEDgQCQx8gcCAQGPoAgQOBwNAHCBwIBIY+QOBAIDD0AQIHAoGhDxA4EAgMfYDAgUBg6AMEDgQCQx8gcCAQGPoAgQOBwNAHCBwIBIY+QOBAIDD0AQIHAoGhDxA4EAgMfYDAgUBg6AMEDgQCQx8gcCAQGPoAgQOBwNAHCBwIBIY+QOBAIDD0AQIHAoGhDxA4EAgMfYDAgUBg6AMEDgQCQx8gcCAQGPoAgQOBwNAHCBwIBIY+QOBAIDD0AQIHAoGhDxA4EAgMfYDAgUhL4ONzdwtcDQgciHQEnh3uSWc2dh7OvF0QHAQOREICPzowAu+fIvAAQOBApCMwDAkEDgQCQx8gcCB6PD19KN0/tTdO98228aNWe+2NS+a30PbG2fHpeCdrymRvtG8/IZ9PdszGyfFiS/n22kagFBkoFcAKAndPr6d3OjYz3lKu4FibvWV4Bab5p4BR7mC8fzAyWhbecuUfE6PD4rvrvJ15sZWNQBkyRiqAFQTunp5PL5dh42Bqfs2dzH9uvdfHF3h/b3xov9PKl1brQ+H44Uh+L9rorPOrG4ESZIRUACsI3D1mLq6bm7/8udNaCbkPo8PT0hvgNntdPIF98iXXase/i179SeE1Aj4yQiqAFQTungCnpzfDJiV2tdlbpEJgeYKdHpq7X4O3eLoP22s1Ah4yQiqAFQTunhCnJ3ehZspXTPo2ewv47h0/zGVzUmgqv4ueL7klS32TRsBFRkgFsILA3dP/6akhebxb0zZ7HVyBdfWWO/DFE2zp3a8lrX//3LQRKCIjpAJYQeDu6fv0lg+Z8wda+5Vvm70ejsBlL6jK3VtUzH4oHKV5I1BARkgFsILA3dPv6RWfMPPVzPr7aou9ap2t1kqBj3U59dzLt8vzrfzTOoRwiUbARkZIBbCCwN3T5+npDbB1R2pb12bvQm+/wELg+d97Nnb2sjdPeXkT3718hTexXTVcohGwkBFSAawgcPf0d3rn1rPlcmPuw/hR6V+GGu41t7j6ny7YvrkCZ1Xm78BkaR3tn+a1Stx7lH9elN6lN24ElsgIqQBWELh7Bn56l6FEYLgqEDgQ6Qic31SveNEFgUDgQCQg8Hn2FYu97B64+AoKrgwEDkQSAusrqL388RgGgJlXXhC4ewZ+ehApCBwIBIY+QOBAIDD0AQIHAoGhDxA4EAgMfYDAgUBg6AMEDgQCQx8gcCAQGPoAgQOBwNAHCBwIBIY+QOBAIDD0AQIHAoGhDxA4EAgMfYDAgUBg6AMEDgQCQx8gcCAQGPoAgQOBwNAHCBwIBIY+QOBAIDD0AQIHAoGhDxA4EAgMfYDAgUBg6AMEDgQCQx8gcCAQGPoAgQOBwNAHCByI9qc3O3uyu/M9aSftbH/3289OPnX6DlXIiKkAVhC4e9qfnth7cnLydeo5Ozvb2nrT6TtUgcCBaH960oLO8dQz8Es5KBA4EAjcPAjcHAQOBAI3DwI3B4EDgcDNg8DNQeBAIHDzIHBzEDgQCNw8CNwcBA7EFQg8m4ykzniqv8aTgV/KQWHGygsCd0/705MWdII3DAJfA8xYeUHg7ml/etKCTvCGQeBrgBkrLwjcPe1PT1rQCd4wCHwNMGPlBYG7p/3pSQs6wRsGga8BZqy8IHD3tD89aUEneMMsBZ5NxuZHk9F4MtP9dmZTKTIvI6VG42lJMasdO9ZnRNaObs4OVtbMqkhNp+9QhRkrLwjcPe1PT1rQCd4wucCj3MvRWKKKjhyH84JmhykkxfLfnMV7Os42itumiFVjIem8nbzIvBn3aKsjlZy+QxVmrLwgcPe0Pz1pQSd4wyy8tFZT3WarqWIWltzZYqNumH8aLGVcvWHRTPGDYHWkitN3qMKMlRcE7h45vffe/ce1+eiffywt6ARvmBKjSjZWOeZsz34t2pm1VCzgteMUahap4YweVGHGygsCd8+zk0/b8PwvR9JBneANUy6PY2Kp5SbOjlUC57/Nb8KXybf6zddFajijB1WYsfKCwENEOqgTvGEaCVy+cErUyKKglonOBi1eHgTuDTNWXhB4iEgHdYI3TCOBPTHncXfMDS28xFo2XtnOGpGGnL5DFWasvCDwEJEO6gRvmEYCVy3B6quzAC9fP8vPxT8RVS7ll4+04/QdqjBj5QWBh4h0UCd4wzQTWM2TcpaO+vp4WSyvVaunW0Uzm176b8HSjNN3qMKMlRcEHiLSQZ3gDdNQ4IXCxtAsusi6heZrr2YkKa7Cy3aKDV12WZYqTt+hCjNWXhB4iEgHdYI3TGOBJbLkLm6OMwHdZVPltN4yL77LYbfltmO+0eUcanWkptN3qMKMlRcEHiLSQZ3g4ZPr662k+mTsfhq0TfKXskPMWHlB4CEiHdQJHj75su0KvOYXrVYm+UvZIWasvCDwEJEO6gS/gugdtHUPXXoH3U2kVafvUIUZKy8IPESkgzrBrySz7PF2+Xy77gNug0jjTt+hCjNWXhB4iEgHdYKnHgRuDgJHAwKDDwJHAwKDDwJHAwKDDwJHAwKDDwJHw9bWm+fn5zrH083FxcXm5htO36EKBI6Gp5/dl5kt3Uw+d+/ccvoOVchwqQBWEBgURnXgIDDUwagOHASGOhjVgYPAUAejOnAQGOpgVAcOAkMdjOrAQWCog1EdOAgMdTCqAweBoQ5GdeAgMNTBqA4cBIY6GNWBg8BQB6M6cBAY6mBUBw4CQx2M6sBBYKiDUR04CAx1MKoDB4GhDkZ14CAw1MGoDhwEhjoY1YGDwFAHozpwEBjqYFQHDgJDHYzqwEFgqINRHTgIDHUwqgMHgaEORnXgIDDUke6oHp+7W6IEgaGONEd1drgnHdvYeTjzdsUGAkMdiQr86MAIvH+KwMMJAvcBozpwEBjqYFQHDgJDHQFG9XyyI0fZmxxXbW9fwNn++uv5LbS9cXZ8Ot7Jno1N9kb79hNy00PUNtIHchQVwAoCgxJiVPNXSqPD4mvh44cj2Zq9Z2pfoLBd8ASe5q+1jHIH4/2DkdGyULf8EHk782IrG+kBOYAKYAWBQQkyqrlpGwdTa+N032waP+qogIMv8P7e+NB+p5UvrVb1so8D5xCrG+keaV4FsILAoIQZVX+in47NhoWQ7QsUKbuFdsiXXKvB/BD2XXTtITK8RjpHmlcBrCAwKGaGts69OwdOsx6OUb5g7QvYVOyVJ9jpobn7NXiLZ27jykPUN9I10rwKYAWBITSF1azs7rd9AQvfveOHuWxOCi0Ub9RLDtGkkY6R5lUAKwgMwbF8KL81bV9giStwXn5jZD3Blt791h6iaSOdIs2rAFYQGMKzkCr7wX3f20mBBYuS+a9lL6jK3as5RPNGukSaVwGsIDBcAfqWKPvrS9kfb9cukFtnq7VS4GNdTj33dOEdm6W4eA6XaKRDpHkVwAoCw1Wgb4kkxXVswXoF5hut211H4PlL7I2dvezN07yRMvfyu2gT9xwu0Uh3SPMqgBUEhitB3xJV3/2uVUD/0wXbN1dg4Xyyv1Bub7R/mtcqce9RzTk0bqQzpHkVwAoCw9XgvxlyaF8go0TgSJFuqABWEBiuhJVetS+Qkd9UVy7jMSH9UAGsIDBcAfoMWX3D2UGB7CsWe9k9cOlrsOiQjqgAVhAYwuO/xXVoX0AE1ldQe+NHCSy/gvRFBbCCwABxgMAAEYPAABGDwAARg8AAEYPAABGDwAARg8AAEYPAABGDwAARg8AAEYPAABGDwAARg8AAEZOOwN/622++/Oufne4BJMyri//d3HxDBbASpcAfvP/z4yd/cnoIkDCzsyc3dt9WAaxEKfD9+/c/+Xjs9BAgYR4/uHPr1oEKYCVKgV++fPnW9t/JTYXTSYBUeWd04/nz5yqAlSgFlhwdfXbzVx84nQRIknt3bt2795869YuJVWCJPAl/8vG/sA5D2tz//b998P7PXr16pfO+mIgFltz/4x9u7Hz/6PE9ecR3ug0QNS++mD797I9y5/zJJ/9eZa8kboElL168uPmbX9/YfXuDkITy1vZ3PvrFh6XPvcu8fv3/o6VB6ClYuSkAAAAASUVORK5CYII="},183:function(t,a,s){"use strict";s.r(a);var n=[function(){var t=this.$createElement,a=this._self._c||t;return a("h1",{attrs:{id:"spring-conteiner-dependency-injection"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spring-conteiner-dependency-injection","aria-hidden":"true"}},[this._v("#")]),this._v(" Spring Conteiner, Dependency Injection")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"dependency-injectionとその利点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dependency-injectionとその利点","aria-hidden":"true"}},[this._v("#")]),this._v(" Dependency Injectionとその利点")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Dependency Injection (DI)は「依存性の注入」と訳される。"),a("br"),this._v("\n必要なインスタンス（依存性）を"),a("strong",[this._v("外から代入")]),this._v("することで、各モジュールが疎結合になるように設計する。"),a("br"),this._v("\n硬い言葉で表現すると、あるオブジェクトに対して、利用（依存）しているオブジェクトを注入することで、オブジェクト間の依存関係を作成する。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("img",{attrs:{src:s(161),alt:"C001_DI"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("ul",[a("li",[this._v("クラス間・Layer間を疎結合化できる。")]),this._v(" "),a("li",[this._v("Unitテストがしやすくなる（Testabilityの向上）")]),this._v(" "),a("li",[this._v("インスタンスの差し替えなどが可能となる（例えば、テスト時に開発系・テスト系・本番系のデータアクセスクラスを用意してDIしたり）。")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"spring-frameworkにおけるdiの方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spring-frameworkにおけるdiの方法","aria-hidden":"true"}},[this._v("#")]),this._v(" Spring FrameworkにおけるDIの方法")])},function(){var t=this.$createElement,a=this._self._c||t;return a("ol",[a("li",[this._v("Javaコンフィグファイル")]),this._v(" "),a("li",[this._v("アノテーション")]),this._v(" "),a("li",[this._v("XML (→古いのでほとんど使われない)")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"danger custom-block"},[a("p",{staticClass:"custom-block-title"},[this._v("注意")]),this._v(" "),a("p",[this._v("XMLによる設定はすでにレガシーなので、原則的には使わないようにしましょう。")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考","aria-hidden":"true"}},[this._v("#")]),this._v(" 参考")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"パターン・アンチパターンとは。diとはパターンなのか？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#パターン・アンチパターンとは。diとはパターンなのか？","aria-hidden":"true"}},[this._v("#")]),this._v(" パターン・アンチパターンとは。DIとはパターンなのか？")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("アンチパターンとは、推奨されない設計のことを指す。"),a("br"),this._v("\nDIも設計パターンの一部と言える。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"インターフェイスとその利点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#インターフェイスとその利点","aria-hidden":"true"}},[this._v("#")]),this._v(" インターフェイスとその利点")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"_1-jdk-proxy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-jdk-proxy","aria-hidden":"true"}},[this._v("#")]),this._v(" 1. JDK Proxy")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("インターフェイスを実装したクラスにインジェクション（Spring FrameworkだとこちらがDefault。インターフェイス持たないクラスの場合、CGlib Proxyに処理を委譲する仕組みになっている）"),a("br"),this._v("\n当たり前だが、インターフェイスを持たないクラスをProxy化することはできない。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"_2-cglib-proxy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-cglib-proxy","aria-hidden":"true"}},[this._v("#")]),this._v(" 2. CGlib Proxy")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("スーパークラスを継承したクラスにインジェクション（Spring BootだとこちらがDefault）"),a("br"),this._v("\nスーパークラス側で"),a("code",[this._v("final")]),this._v("のついたクラス・メソッドは継承・オーバーライドができないため、それらのクラスはProxy化することができない。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"spring-beansでインターフェイスの利用が推奨される理由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spring-beansでインターフェイスの利用が推奨される理由","aria-hidden":"true"}},[this._v("#")]),this._v(" Spring beansでインターフェイスの利用が推奨される理由")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"application-contextとはspringが管理するコンテナのこと"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#application-contextとはspringが管理するコンテナのこと","aria-hidden":"true"}},[this._v("#")]),this._v(" application-contextとはSpringが管理するコンテナのこと")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("img",{attrs:{src:s(162),alt:"C009_1_DI.png"}})])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TransferServiceImpl")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TransferService")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("// Needed to perform moneytransfers between accounts")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("TransferServiceImpl")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AccountRepository ar"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accountRepository "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" ar"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("JdbcAccountRepository")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("AccountRepository")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("// Needed to load accounts from the database")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("JdbcAccountRepository")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DataSource ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dataSource "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ApplicationConfig")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" TransferService "),s("span",{attrs:{class:"token function"}},[t._v("transferService")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TransferServiceImpl")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function"}},[t._v("accountRepository")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" AccountRepository "),s("span",{attrs:{class:"token function"}},[t._v("accountRepository")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("JdbcAccountRepository")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function"}},[t._v("dataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" DataSource "),s("span",{attrs:{class:"token function"}},[t._v("dataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        BasicDataSource dataSource "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" New "),s("span",{attrs:{class:"token class-name"}},[t._v("BasicDataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setDriverClassName")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"org.postgresql.Driver"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setUrl")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"jdbc:postgresql://localhost/transfer"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setUsername")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"user"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setPassword")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"password"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// Create the application from the configuration")]),t._v("\nApplicationContext context "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" \n    SpringApplication"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("run")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" ApplicationConfig"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// Look up the application service interface")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v('// "transferService"がBean IDとなる。')]),t._v("\nTransferService service "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" \n    context"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getBean")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“transferService”"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" TransferService"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// Use the application")]),t._v("\nservice"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("transfer")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("MonetaryAmount")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“"),s("span",{attrs:{class:"token number"}},[t._v("300.00")]),t._v("”"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" “"),s("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("”"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" “"),s("span",{attrs:{class:"token number"}},[t._v("2")]),t._v("”"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// No need for bean id if type is unique")]),t._v("\nTransferService ts3 "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" context"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getBean")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TransferService"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"junitのテストクラス作成（diしない場合の例）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#junitのテストクラス作成（diしない場合の例）","aria-hidden":"true"}},[this._v("#")]),this._v(" JUnitのテストクラス作成（DIしない場合の例）")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TransferServiceTests")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" TransferService service"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@BeforeEach")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("setUp")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token comment"}},[t._v("// Create the application from the configuration")]),t._v("\n        ApplicationContext context "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("\n            SpringApplication"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("run")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" ApplicationConfig"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{attrs:{class:"token comment"}},[t._v("// Look up the application service interface")]),t._v("\n        service "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" context"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getBean")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TransferService"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("moneyTransfer")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        Confirmation receipt "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("\n            service"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("transfer")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("MonetaryAmount")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"300.00"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"1"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"2"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        Assert"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("assertEquals")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"500.00"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" receipt"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getNewBalance")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"複数ファイルからapplicationcontextを作成する"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#複数ファイルからapplicationcontextを作成する","aria-hidden":"true"}},[this._v("#")]),this._v(" 複数ファイルからApplicationContextを作成する")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("@Configuration")]),this._v("アノテーションを付けたクラスは長くなりがちなので、分割しておくことができる。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("特定のConfigクラスを読み込むには、"),a("code",[this._v("@Import")]),this._v("アノテーションをつけて、読み込むクラス名を指定する。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("大元のConfigクラス。"),a("code",[this._v("ApplicationConfig")]),this._v("クラスと"),a("code",[this._v("WebConfig")]),this._v("クラスをインポートしている。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Import")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ApplicationConfig"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" WebConfig"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("InfrastructureConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ApplicationConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("WebConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("Application")]),this._v(" Beansと"),a("code",[this._v("Infrastructure")]),this._v(" Beansを分離しておくのがBest Practices。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("img",{attrs:{src:s(163),alt:"C010_1_DI.png"}})])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ApplicationConfig")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" TransferService "),s("span",{attrs:{class:"token function"}},[t._v("transferService")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TransferServiceImpl")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function"}},[t._v("accountRepository")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" AccountRepository "),s("span",{attrs:{class:"token function"}},[t._v("accountRepository")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("JdbcAccountRepository")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function"}},[t._v("dataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" DataSource "),s("span",{attrs:{class:"token function"}},[t._v("dataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        BasicDataSource dataSource "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" New "),s("span",{attrs:{class:"token class-name"}},[t._v("BasicDataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setDriverClassName")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"org.postgresql.Driver"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setUrl")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"jdbc:postgresql://localhost/transfer"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setUsername")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"user"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setPassword")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"password"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("以下に分割後の例を示す。"),a("br"),this._v(" "),a("code",[this._v("ApplicationConfig")]),this._v("クラス内のBeanは、インポート先の"),a("code",[this._v("TestInfrastructureConfig")]),this._v("クラスのDataSourceのBeanに依存している。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("DataSourceのBeanを使うために、"),a("code",[this._v("@Autowired")]),this._v("アノテーションを使って、別のconfigクラスのBeanを取得する（これをインジェクションという）。コンストラクタでインジェクションするのが普通。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("ただし、configクラス内でコンストラクタが１つの場合、"),a("code",[this._v("@Autowired")]),this._v("アノテーションを省略することができる。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ApplicationConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("final")]),t._v(" DataSource dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("ApplicationConfig")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DataSource ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dataSource "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v(" \n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" TransferService "),s("span",{attrs:{class:"token function"}},[t._v("transferService")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TransferServiceImpl")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("accountRepository")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v(" \n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" AccountRepository "),s("span",{attrs:{class:"token function"}},[t._v("accountRepository")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DataSource dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("JdbcAccountRepository")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" dataSource "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Import")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ApplicationConfig"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TestInfrastructureConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v(" \n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" DataSource "),s("span",{attrs:{class:"token function"}},[t._v("dataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"beanのスコープ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#beanのスコープ","aria-hidden":"true"}},[this._v("#")]),this._v(" Beanのスコープ")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"singletonスコープ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#singletonスコープ","aria-hidden":"true"}},[this._v("#")]),this._v(" Singletonスコープ")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("デフォルトのスコープは"),a("code",[this._v("singleton")]),this._v("。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Scope")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“singleton”"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" AccountService "),s("span",{attrs:{class:"token function"}},[t._v("accountService")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("AccountService service1 "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AccountService"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" context"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getBean")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“accountService”"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nAccountService service2 "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AccountService"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" context"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getBean")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“accountService”"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("assert")]),t._v(" service1 "),s("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" service2"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// True – same object")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("ul",[a("li",[this._v("Springアプリケーションは複数リクエストに対して、マルチスレッドで処理。")]),this._v(" "),a("li",[this._v("スレッドセーフでなければならない（Stateless・Immutable beans）。")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"protptypeスコープ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#protptypeスコープ","aria-hidden":"true"}},[this._v("#")]),this._v(" Protptypeスコープ")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Scope")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“prototype”"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" AccountService "),s("span",{attrs:{class:"token function"}},[t._v("accountService")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" …\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("AccountService service1 "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AccountService"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" context"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getBean")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“accountService”"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nAccountService service2 "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AccountService"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" context"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getBean")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“accountService”"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("assert")]),t._v(" service1 "),s("span",{attrs:{class:"token operator"}},[t._v("!=")]),t._v(" service2"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// True – different objects")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"spring側で用意されているスコープ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spring側で用意されているスコープ","aria-hidden":"true"}},[this._v("#")]),this._v(" Spring側で用意されているスコープ")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("table",[s("thead",[s("tr",[s("th",[t._v("スコープ名")]),t._v(" "),s("th",[t._v("説明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("singleton")]),t._v(" "),s("td",[t._v("１つのインスタンスが作られる")])]),t._v(" "),s("tr",[s("td",[t._v("prototype")]),t._v(" "),s("td",[t._v("新しいインスタンスが毎回作られる")])]),t._v(" "),s("tr",[s("td",[t._v("session")]),t._v(" "),s("td",[t._v("新しいインスタンスがユーザごとに１つ作られる")])]),t._v(" "),s("tr",[s("td",[t._v("request")]),t._v(" "),s("td",[t._v("新しいインスタンスがリクエストごとに１つ作られる")])])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"環境設定（environmentオブジェクトとして読み込み）の読み込み"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#環境設定（environmentオブジェクトとして読み込み）の読み込み","aria-hidden":"true"}},[this._v("#")]),this._v(" 環境設定（Environmentオブジェクトとして読み込み）の読み込み")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ol",[s("li",[t._v("Servlet Contextパラメータ（web.xml）")]),t._v(" "),s("li",[t._v("JNDI (Java Naming and Directory Interface)")]),t._v(" "),s("li",[t._v("JVMシステムプロパティ（java -Dxxx=yyy）")]),t._v(" "),s("li",[t._v("OS環境変数（Cloudでよく使う）")]),t._v(" "),s("li",[t._v("Javaプロパティファイル")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"環境変数の読み込み例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#環境変数の読み込み例","aria-hidden":"true"}},[this._v("#")]),this._v(" 環境変数の読み込み例")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DbConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    Environment env"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("DbConfig")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Environment env"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" env"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" DataSource "),s("span",{attrs:{class:"token function"}},[t._v("dataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        BasicDataSource ds "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("BasicDataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setDriverClassName")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" env"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getProperty")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"db.driver"')]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setUrl")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" env"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getProperty")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"db.url"')]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setUser")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" env"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getProperty")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"db.user"')]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setPassword")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" env"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getProperty")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"db.password"')]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v("db.driver=org.postgresql.Driver\ndb.url=jdbc:postgresql:localhost/transfer\ndb.user=transfer-app\ndb.password=secret45\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Javaプロパティファイルを読み込むには、"),a("code",[this._v("@PropertySource")]),this._v("アノテーションを用いてファイルパスを指定する。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@PropertySource")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"classpath:/com/organization/config/app.properties"')]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@PropertySource")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"file:config/local.properties"')]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ApplicationConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"環境変数（プロパティ）にアクセスする"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#環境変数（プロパティ）にアクセスする","aria-hidden":"true"}},[this._v("#")]),this._v(" 環境変数（プロパティ）にアクセスする")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("@Value")]),this._v("アノテーションを用いて、引数に値を代入することで、プロパティにアクセスすることもできる。Environmentオブジェクトをわざわざ用意する必要がなくなる。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DbConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" DataSource "),s("span",{attrs:{class:"token function"}},[t._v("dataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Value")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"${db.driver}"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" String driver"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Value")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"${db.url}"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" String url"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Value")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"${db.user}"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" String user"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Value")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"${db.password}"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" String pwd"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        BasicDataSource ds "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("BasicDataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setDriverClassName")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("driver"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setUrl")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setUser")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setPassword")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pwd"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ds"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"開発系・テスト系・本番系で環境変数（プロパティ）を変更する"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#開発系・テスト系・本番系で環境変数（プロパティ）を変更する","aria-hidden":"true"}},[this._v("#")]),this._v(" 開発系・テスト系・本番系で環境変数（プロパティ）を変更する")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("${ENV}")]),this._v("を変数にして、複数のプロパティファイルに対応できる。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@PropertySource")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"classpath:/com/acme/config/app-${ENV}.properties"')]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("開発系"),a("code",[this._v("app-dev.properties")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v("db.driver=org.postgresql.Driver\ndb.url=jdbc:postgresql://localhost/transfer\ndb.user=transfer-app\ndb.password=secret45\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("テスト系"),a("code",[this._v("app-qa.properties")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v("db.driver=org.postgresql.Driver\ndb.url=jdbc:postgresql://qa/transfer\ndb.user=transfer-app\ndb.password=secret88\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("本番系"),a("code",[this._v("app-prod.properties")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v("db.driver=org.postgresql.Driver\ndb.url=jdbc:postgresql://prod/transfer\ndb.user=transfer-app\ndb.password=secret99\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"プロファイルを用いてbeanをグループ化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#プロファイルを用いてbeanをグループ化","aria-hidden":"true"}},[this._v("#")]),this._v(" プロファイルを用いてBeanをグループ化")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Beanをプロファイルでグループ化することができる。"),a("br"),this._v("\nグループに属していないBeanは"),a("strong",[this._v("いつでも")]),this._v("使われる。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("img",{attrs:{src:s(164),alt:"C011_1_DI.png"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("@Profile")]),this._v("でJava configクラスがどのグループに属するか決められる（メソッド単位で付けられる）。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Profile")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"dev"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DevConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" DataSource "),s("span",{attrs:{class:"token function"}},[t._v("dataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    EmbeddedDatabaseBuilder builder "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("EmbeddedDatabaseBuilder")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" builder"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setName")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"testdb"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setType")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("EmbeddedDatabaseType"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HSQL"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("addScript")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"classpath:/testdb/schema.db"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("addScript")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"classpath:/testdb/test-data.db"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("build")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("開発用と本番用で同じBean ID名・異なるメソッド名を付けて、"),a("code",[this._v("@Profile")]),this._v("アノテーションで開発用と本番用を使い分ける。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("br"),s("br"),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DataSourceConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("// 開発用")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token string"}},[t._v('"dataSource"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Profile")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"dev"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" DataSource "),s("span",{attrs:{class:"token function"}},[t._v("dataSourceForDev")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        EmbeddedDatabaseBuilder builder "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("EmbeddedDatabaseBuilder")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" builder"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setName")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"testdb"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{attrs:{class:"token comment"}},[t._v("// 本番用")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token string"}},[t._v('"dataSource"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Profile")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"prod"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" DataSource "),s("span",{attrs:{class:"token function"}},[t._v("dataSourceForProd")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        BasicDataSource dataSource "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("BasicDataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"特定のプロファイル（グループ）から除外する"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#特定のプロファイル（グループ）から除外する","aria-hidden":"true"}},[this._v("#")]),this._v(" 特定のプロファイル（グループ）から除外する")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("!")]),this._v("を付けてプロファイルを指定することで、そのプロファイルから除外することができる。以下の例では、"),a("code",[this._v("dev")]),this._v("以外でBeanが使われる。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Profile")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"!dev"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DevConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    …\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"プロファイルを有効化する方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#プロファイルを有効化する方法","aria-hidden":"true"}},[this._v("#")]),this._v(" プロファイルを有効化する方法")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"jvmシステムプロパティ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jvmシステムプロパティ","aria-hidden":"true"}},[this._v("#")]),this._v(" JVMシステムプロパティ")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v("-Dspring.profiles.active=dev,jpa\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"java-config"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#java-config","aria-hidden":"true"}},[this._v("#")]),this._v(" Java config")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("System"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setProperty")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"spring.profiles.active"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"dev,jpa"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nSpringApplication"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("run")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AppConfig"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"テスト時"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#テスト時","aria-hidden":"true"}},[this._v("#")]),this._v(" テスト時")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("@ActiveProfiles")]),this._v("アノテーションを使う。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"プロパティファイルの選択（開発系・本番系）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#プロパティファイルの選択（開発系・本番系）","aria-hidden":"true"}},[this._v("#")]),this._v(" プロパティファイルの選択（開発系・本番系）")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"開発系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#開発系","aria-hidden":"true"}},[this._v("#")]),this._v(" 開発系")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("開発用のプロパティファイル"),a("code",[this._v("dev.properties")]),this._v("を読み込む。"),a("br"),this._v("\nプロファイルは"),a("code",[this._v("dev")]),this._v("を使う。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Profile")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“dev”"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@PropertySource")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" “dev"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("properties” "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DevConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" … "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"本番系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本番系","aria-hidden":"true"}},[this._v("#")]),this._v(" 本番系")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("開発用のプロパティファイル"),a("code",[this._v("prod.properties")]),this._v("を読み込む。"),a("br"),this._v("\nプロファイルは"),a("code",[this._v("prod")]),this._v("を使う。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Profile")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“prod”"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@PropertySource")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" “prod"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("properties” "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ProdConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" … "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"spring-expression-language-spel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spring-expression-language-spel","aria-hidden":"true"}},[this._v("#")]),this._v(" Spring Expression Language(SpEL)")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"アノテーションによるbean設定方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#アノテーションによるbean設定方法","aria-hidden":"true"}},[this._v("#")]),this._v(" アノテーションによるBean設定方法")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("これまでの説明では、"),a("code",[this._v("@Bean")]),this._v("アノテーションによりインジェクションするBeanをJavaコンフィグファイルにいちいち記述していた。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("実は、Beanにするクラスに"),a("code",[this._v("@Component")]),this._v("アノテーションを付け、Javaコンフィグクラスに"),a("code",[this._v("@ComponentScan")]),this._v("アノテーションをつけることによって"),a("code",[this._v("@Bean")]),this._v("を付ける必要がなくなる。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TransferServiceImpl")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TransferService")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("TransferServiceImpl")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AccountRepository repo"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accountRepository "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" repo"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("com.bank")]),this._v("パッケージ以下にあるクラス（コンポーネント）をスキャンし、Beanを作る。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@ComponentScan")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"com.bank"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("AnnotationConfig")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("// No bean definition needed any more")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("img",{attrs:{src:s(165),alt:"C012_1_DI.png"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"bean-idの定義"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bean-idの定義","aria-hidden":"true"}},[this._v("#")]),this._v(" Bean IDの定義")])},function(){var t=this.$createElement,a=this._self._c||t;return a("ol",[a("li",[this._v("Bean IDを明示的に記述")]),this._v(" "),a("li",[this._v("メソッドの頭文字を小文字にしたBean IDになる")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"インジェクション（-autowired）ができる箇所"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#インジェクション（-autowired）ができる箇所","aria-hidden":"true"}},[this._v("#")]),this._v(" インジェクション（@Autowired）ができる箇所")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"_1-コンストラクタインジェクション"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-コンストラクタインジェクション","aria-hidden":"true"}},[this._v("#")]),this._v(" 1.　コンストラクタインジェクション")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("TransferServiceImpl")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AccountRepository a"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accountRepository "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" a"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h4",{attrs:{id:"value"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#value","aria-hidden":"true"}},[this._v("#")]),this._v(" @Value")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("TransferServiceImpl")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Value")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"${daily.limit}"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" max"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("maxTransfersPerDay "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" max"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"_2-メソッド-setter-インジェクション"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-メソッド-setter-インジェクション","aria-hidden":"true"}},[this._v("#")]),this._v(" 2. メソッド(Setter)インジェクション")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("setAccountRepository")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AccountRepository a"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accountRepository "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" a"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h4",{attrs:{id:"value-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#value-2","aria-hidden":"true"}},[this._v("#")]),this._v(" @Value")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("setDailyLimit")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Value")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"${daily.limit}"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" max"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("maxTransfersPerDay "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" max"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"_3-フィールドインジェクション"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-フィールドインジェクション","aria-hidden":"true"}},[this._v("#")]),this._v(" 3. フィールドインジェクション")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token annotation punctuation"}},[this._v("@Autowired")]),this._v("\n"),a("span",{attrs:{class:"token keyword"}},[this._v("private")]),this._v(" AccountRepository accountRepository"),a("span",{attrs:{class:"token punctuation"}},[this._v(";")]),this._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h4",{attrs:{id:"value-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#value-3","aria-hidden":"true"}},[this._v("#")]),this._v(" @Value")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Value")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("\"#{environment['daily.limit']}\"")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" maxTransfersPerDay"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h4",{attrs:{id:"参考-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考-2","aria-hidden":"true"}},[this._v("#")]),this._v(" 参考")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"インジェクション対象が曖昧なケース"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#インジェクション対象が曖昧なケース","aria-hidden":"true"}},[this._v("#")]),this._v(" インジェクション対象が曖昧なケース")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TransferServiceImpl")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TransferService")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("TransferServiceImpl")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AccountRepository accountRepository"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" … "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("以下のように、AccountRepositoryインターフェースを実装したクラスが２つある場合、どちらをインジェクションしたらいいか判断できないため、"),a("code",[this._v("NoSuchBeanDefinitionException")]),this._v("例外が発生する。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("JpaAccountRepository")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("AccountRepository")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("JdbcAccountRepository")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("AccountRepository")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"解決策"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解決策","aria-hidden":"true"}},[this._v("#")]),this._v(" 解決策")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("@Qualifier")]),this._v("アノテーションを使い、インジェクション対象のBean IDを明示する。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"transferService"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TransferServiceImpl")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TransferService")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("TransferServiceImpl")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Qualifier")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"jdbcAccountRepository"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                                AccountRepository accountRepository"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" … "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"jdbcAccountRepository"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),s("span",{attrs:{class:"token comment"}},[t._v("// Bean ID")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("JdbcAccountRepository")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("AccountRepository")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"jpaAccountRepository"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("      "),s("span",{attrs:{class:"token comment"}},[t._v("// Bean ID")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("JpaAccountRepository")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("AccountRepository")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"delayed-initialization"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#delayed-initialization","aria-hidden":"true"}},[this._v("#")]),this._v(" Delayed Initialization")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("しかし、"),a("code",[this._v("@Lazy")]),this._v("アノテーションをつけると、最初に使われるタイミングでBeanが生成される（"),a("code",[this._v("ApplicationContext.getBean")]),this._v("メソッド実行時）。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Lazy")]),t._v(" "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("MailService")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("MailService")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Value")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"smtp:..."')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" String url"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token comment"}},[t._v("// connect to mail-server")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n…\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("まず使うことはない…。"),a("code",[this._v("@Lazy")]),this._v("を使っても起動が早くなるわけではない。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"javaコンフィグとアノテーションの比較"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#javaコンフィグとアノテーションの比較","aria-hidden":"true"}},[this._v("#")]),this._v(" Javaコンフィグとアノテーションの比較")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"javaコンフィグ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#javaコンフィグ","aria-hidden":"true"}},[this._v("#")]),this._v(" Javaコンフィグ")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TransferConfiguration")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token string"}},[t._v('"transferService"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Scope")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"prototype"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Profile")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"dev"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Lazy")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token boolean"}},[t._v("false")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" TransferService "),s("span",{attrs:{class:"token function"}},[t._v("tsvc")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TransferServiceImpl")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function"}},[t._v("accountRepository")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"アノテーション"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#アノテーション","aria-hidden":"true"}},[this._v("#")]),this._v(" アノテーション")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"transferService"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Scope")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"prototype"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Profile")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"dev"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Lazy")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token boolean"}},[t._v("false")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TransferServiceImpl")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("TransferService")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" TransferServiceImpl "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AccountRepository accRep"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" … "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"コンポーネントスキャン"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#コンポーネントスキャン","aria-hidden":"true"}},[this._v("#")]),this._v(" コンポーネントスキャン")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"良くない例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#良くない例","aria-hidden":"true"}},[this._v("#")]),this._v(" 良くない例")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@ComponentScan")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token string"}},[t._v('"org"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"com"')]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@ComponentScan")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"com"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"良い例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#良い例","aria-hidden":"true"}},[this._v("#")]),this._v(" 良い例")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@ComponentScan")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"com.bank.app"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("--")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@ComponentScan")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token string"}},[t._v('"com.bank.app.repository"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"com.bank.app.service"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"com.bank.app.controller"')]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"di後の初期化処理とbeanインスタンスを破棄する前の処理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#di後の初期化処理とbeanインスタンスを破棄する前の処理","aria-hidden":"true"}},[this._v("#")]),this._v(" DI後の初期化処理とBeanインスタンスを破棄する前の処理")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("@PostConstruct")]),this._v("アノテーションはDI後の初期化処理（メソッド）につける。すべてのDIが終わった後に呼ばれる。コンストラクタはDIのみに使い、その他の初期化処理はこのアノテーションを付けて行う。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("@PreDestory")]),this._v("アノテーションは、Beanインスタンスが破棄される直前に呼ばれる。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("JdbcAccountRepository")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@PostConstruct")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("populateCache")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@PreDestroy")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("flushCache")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"postcontruct"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#postcontruct","aria-hidden":"true"}},[this._v("#")]),this._v(" @PostContruct")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("JdbcAccountRepository")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" DataSource dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("setDataSource")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DataSource dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dataSource "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@PostConstruct")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("populateCache")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        Connection conn "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getConnection")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v("Constructer called -> Setter called(setDataSource) -> PostConstructメソッド called(populateCache)\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"predestroy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#predestroy","aria-hidden":"true"}},[this._v("#")]),this._v(" @PreDestroy")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("ConfigurableApplicationContext context "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" …"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("// Triggers call of all @PreDestroy annotated methods")]),t._v("\ncontext"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("close")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("context.close()")]),this._v("が呼ばれる前の段階で、以下の"),a("code",[this._v("@PreDestory")]),this._v("アノテーションのついたメソッドが呼ばれる。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("JdbcAccountRepository")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@PreDestroy")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("flushCache")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" … "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"ステレオタイプアノテーション"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ステレオタイプアノテーション","aria-hidden":"true"}},[this._v("#")]),this._v(" ステレオタイプアノテーション")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("@Component")]),this._v("アノテーションの子アノテーションとして、いくつか別のアノテーションがある。いずれもコンポーネントスキャンの対象となる。")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Repository")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Controller")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@RestController")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"wip-積み残し課題"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wip-積み残し課題","aria-hidden":"true"}},[this._v("#")]),this._v(" [WIP] 積み残し課題")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ul",[s("li",[t._v("What is the concept of a “container” and what is its lifecycle?")]),t._v(" "),s("li",[t._v("How are you going to create a new instance of an ApplicationContext?")]),t._v(" "),s("li",[t._v("Can you describe the lifecycle of a Spring Bean in an ApplicationContext?")]),t._v(" "),s("li",[t._v("How are you going to create an ApplicationContext in an integration test test?")]),t._v(" "),s("li",[t._v("What is the preferred way to close an application context? Does Spring Boot do this for you?")]),t._v(" "),s("li",[t._v("Dependency injection using annotations (@Component, @Autowired)?")]),t._v(" "),s("li",[t._v("Component scanning, Stereotypes and Meta-Annotations?")]),t._v(" "),s("li",[t._v("Are beans lazily or eagerly instantiated by default? How do you alter this behavior?")]),t._v(" "),s("li",[t._v("What is a BeanFactoryPostProcessor and what is it used for? When is it invoked?")]),t._v(" "),s("li",[t._v("Why would you define a static @Bean method?")]),t._v(" "),s("li",[t._v("What is a ProperySourcesPlaceholderConfigurer used for?")]),t._v(" "),s("li",[t._v("What is a BeanPostProcessor and how is it different to a BeanFactoryPostProcessor?")]),t._v(" "),s("li",[t._v("What do they do? When are they called?")]),t._v(" "),s("li",[t._v("What is an initialization method and how is it declared on a Spring bean?")]),t._v(" "),s("li",[t._v("What is a destroy method, how is it declared and when is it called?")]),t._v(" "),s("li",[t._v("Consider how you enable JSR-250 annotations like @PostConstruct and @PreDestroy? When/how will they get called?")]),t._v(" "),s("li",[t._v("How else can you define an initialization or destruction method for a Spring bean?")]),t._v(" "),s("li",[t._v("What does component-scanning do?")]),t._v(" "),s("li",[t._v("What is the behavior of the annotation @Autowired with regards to field injection, constructor injection and method injection?")]),t._v(" "),s("li",[t._v("What do you have to do, if you would like to inject something into a private field? Ho does this impact testing?")]),t._v(" "),s("li",[t._v("How does the @Qualifier annotation complement the use of @Autowired?")]),t._v(" "),s("li",[t._v("What is a proxy object and what are the two different types of proxies Spring can create?")]),t._v(" "),s("li",[t._v("What are the limitations of these proxies (per type)?")]),t._v(" "),s("li",[t._v("What is the power of a proxy object and where are the disadvantages?")]),t._v(" "),s("li",[t._v("What are the advantages of Java Config? What are the limitations?")]),t._v(" "),s("li",[t._v("What does the @Bean annotation do?")]),t._v(" "),s("li",[t._v("What is the default bean id if you only use @Bean? How can you override this?")]),t._v(" "),s("li",[t._v("Why are you not allowed to annotate a final class with @Configuration")]),t._v(" "),s("li",[t._v("How do @Configuration annotated classes support singleton beans?")]),t._v(" "),s("li",[t._v("Why can’t @Bean methods be final either?")]),t._v(" "),s("li",[t._v("How do you configure profiles?, What are possible use cases where they might be useful?")]),t._v(" "),s("li",[t._v("Can you use @Bean together with @Profile?")]),t._v(" "),s("li",[t._v("Can you use @Component together with @Profile?")]),t._v(" "),s("li",[t._v("How many profiles can you have?")]),t._v(" "),s("li",[t._v("How do you inject scalar/literal values into Spring beans?")]),t._v(" "),s("li",[t._v("What is @Value used for?")]),t._v(" "),s("li",[t._v("What is Spring Expression Language (SpEL for short)?")]),t._v(" "),s("li",[t._v("What is the Environment abstraction in Spring?")]),t._v(" "),s("li",[t._v("Where can properties in the environment come from – there are many sources for properties – check the documentation if not sure. Spring Boot adds even more.")]),t._v(" "),s("li",[t._v("What can you reference using SpEL?")]),t._v(" "),s("li",[t._v("What is the difference between $ and # in @Value expressions?")])])}],e=s(0),o=Object(e.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),s("p",[t._v("DIを行うメリットとしては、")]),t._v(" "),t._m(4),t._v(" "),s("p",[t._v("などが挙げられる。")]),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.slideshare.net/masatoshitada7/30spring-5-spring-boot-2-103523666",target:"_blank",rel:"noopener noreferrer"}},[t._v("初めてでも30分で分かるSpring 5 & Spring Boot 2オーバービュー"),s("OutboundLink")],1)]),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),s("p",[t._v("従来型のクラス設計（Servlet、ビジネスロジック、DAO、DTO）は、お互いが密結合になりがち。\n結果として、改修を重ねるごとに改修の難易度が増す（ビジネスロジックの複雑化・肥大化が原因の1つ）。")]),t._v(" "),s("p",[t._v("DIを利用したクラス設計を行うことで、上記の各クラスが疎結合化し、関心事の分離が可能となる。\n結果として、コードがスッキリする。")]),t._v(" "),t._m(11),t._v(" "),s("p",[t._v("DIを行う上で、インターフェイスの用意は必須と言える。")]),t._v(" "),s("p",[t._v("（DIの利点ではないが）インターフェイスを用意することで、ポリモーフィズムの活用などでメリットが生まれる。")]),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),s("p",[t._v("Spring FrameworkではJDK Proxyがデフォルトとなっており、JDK ProxyによるProxy生成の前提条件として、インターフェースの実装があるため。")]),t._v(" "),t._m(17),t._v(" "),s("p",[t._v("SpringのConfigurationクラスやApplicationクラスをインスタンス化する（これらインスタンスのことをBeanと呼ぶ）と、SpringのコンテナであるApplicationContext下で管理される。")]),t._v(" "),t._m(18),t._v(" "),s("p",[t._v("Applicationクラスの例。")]),t._v(" "),t._m(19),s("p",[t._v("Configurationクラス（Configuration Instructions）の例。")]),t._v(" "),t._m(20),s("p",[t._v("実行クラスの例。")]),t._v(" "),t._m(21),s("p",[t._v("BeanへのアクセスはBean IDがユニークである場合に限り、以下のようにBean IDを省略できる（基本的に、Bean IDはユニークであるように設計するため、以下の書き方が一般的）。")]),t._v(" "),t._m(22),t._m(23),t._v(" "),t._m(24),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),s("p",[t._v("インポートされるConfigクラスたち。")]),t._v(" "),t._m(30),t._m(31),t._v(" "),t._m(32),t._v(" "),s("p",[t._v("以下に２つに分割する前の例を示す。")]),t._v(" "),t._m(33),t._m(34),t._v(" "),t._m(35),t._v(" "),t._m(36),t._v(" "),t._m(37),t._m(38),t._m(39),t._v(" "),t._m(40),t._v(" "),t._m(41),t._v(" "),t._m(42),s("p",[t._v("インスタンスが作られるのは１回きり。２回目は同じインスタンスが使い回される。")]),t._v(" "),t._m(43),t._m(44),t._v(" "),t._m(45),t._v(" "),t._m(46),s("p",[t._v("毎回新しいインスタンスが生成される。")]),t._v(" "),t._m(47),t._m(48),t._v(" "),t._m(49),t._v(" "),s("p",[t._v("ほとんどの場合は、singleton。sessionを時々使う。他のスコープはまず使わない。")]),t._v(" "),s("p",[t._v("prototypeの場合、Springのコンテナ管理外となる。その場合、生成されたBeanはJavaのガベージコレクション（GA）の対象となり、普通のJavaのインスタンスとして扱われる。")]),t._v(" "),t._m(50),t._v(" "),s("p",[t._v("以下の順番で、環境設定を読み込む（外から変えられるものから読み込まれる）。")]),t._v(" "),t._m(51),t._v(" "),t._m(52),t._v(" "),s("p",[t._v("環境設定（app.properties）から取得した値を変数に格納して、引数として取る。")]),t._v(" "),t._m(53),s("p",[t._v("app.properties")]),t._v(" "),t._m(54),t._m(55),t._v(" "),t._m(56),t._m(57),t._v(" "),t._m(58),t._v(" "),t._m(59),t._m(60),t._v(" "),t._m(61),t._v(" "),t._m(62),t._m(63),t._v(" "),t._m(64),t._m(65),t._v(" "),t._m(66),t._m(67),t._v(" "),t._m(68),t._m(69),t._v(" "),t._m(70),t._v(" "),t._m(71),t._v(" "),t._m(72),t._v(" "),t._m(73),t._m(74),t._v(" "),t._m(75),t._m(76),t._v(" "),t._m(77),t._v(" "),t._m(78),t._m(79),t._v(" "),t._m(80),t._v(" "),t._m(81),t._m(82),t._v(" "),t._m(83),t._m(84),t._v(" "),t._m(85),t._v(" "),t._m(86),t._v(" "),t._m(87),t._v(" "),t._m(88),t._v(" "),t._m(89),t._m(90),t._v(" "),t._m(91),t._v(" "),t._m(92),t._m(93),t._v(" "),s("p",[t._v("後回し(p.95)。")]),t._v(" "),t._m(94),t._v(" "),t._m(95),t._v(" "),t._m(96),t._v(" "),s("p",[t._v("このときのBean IDは、メソッド名になる（明示しない場合は）。")]),t._v(" "),t._m(97),t._m(98),t._v(" "),t._m(99),t._m(100),t._v(" "),t._m(101),t._v(" "),t._m(102),t._v(" "),s("p",[t._v("2がほとんど。")]),t._v(" "),t._m(103),t._v(" "),s("p",[t._v("基本的に、コンストラクタでインジェクションする。")]),t._v(" "),t._m(104),t._v(" "),s("p",[t._v("循環参照するケースでは、コンストラクタではだめ（あまりない）。")]),t._v(" "),t._m(105),t._m(106),t._v(" "),t._m(107),t._m(108),t._v(" "),s("p",[t._v("Immutableにできない。何度も値がセットされるリスクがある。")]),t._v(" "),t._m(109),t._m(110),t._v(" "),t._m(111),t._m(112),t._v(" "),s("p",[t._v("フィールド変数はプライベート変数であるため、単体テストがしにくい。")]),t._v(" "),t._m(113),t._m(114),t._v(" "),t._m(115),t._m(116),t._v(" "),s("p",[s("a",{attrs:{href:"http://olivergierke.de/2013/11/why-field-injection-is-evil/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://olivergierke.de/2013/11/why-field-injection-is-evil/"),s("OutboundLink")],1)]),t._v(" "),t._m(117),t._v(" "),t._m(118),t._m(119),t._v(" "),t._m(120),t._m(121),t._v(" "),t._m(122),t._v(" "),t._m(123),t._m(124),s("p",[t._v("基本的に、Bean IDはユニークになるように設計する（上記の例はしょうがないにしても）。")]),t._v(" "),t._m(125),t._v(" "),s("p",[t._v("基本的に、ApplicationContext（Springのコンテナ）が作成されたタイミングで、Beanが生成される。")]),t._v(" "),t._m(126),t._v(" "),s("p",[t._v("Beanが生成されるタイミングでSMTPサーバが起動していない場合")]),t._v(" "),t._m(127),t._m(128),t._v(" "),t._m(129),t._v(" "),s("p",[t._v("基本的には、可能な限りアノテーションを利用して、それ以外をJavaコンフィグで記述する。")]),t._v(" "),t._m(130),t._v(" "),t._m(131),t._m(132),t._v(" "),t._m(133),t._m(134),t._v(" "),s("p",[t._v("コンポーネントスキャンの範囲が多いと、起動時間が長くなる。そのため、スキャン対象の範囲はできるだけ小さくすることが重要。")]),t._v(" "),t._m(135),t._v(" "),t._m(136),t._m(137),t._v(" "),t._m(138),t._m(139),t._v(" "),t._m(140),t._v(" "),t._m(141),t._v(" "),s("p",[t._v("引数なし・戻り値なしでないと使えない。")]),t._v(" "),t._m(142),t._m(143),t._v(" "),s("p",[t._v("Setterメソッドが呼ばれた後、実行される。")]),t._v(" "),t._m(144),t._m(145),t._m(146),t._v(" "),s("p",[t._v("一般的には、アプリケーションが終了する際に呼ばれる（プロセスがKillされたかどうかは関係ない）。リソースの開放を行う。")]),t._v(" "),t._m(147),t._m(148),t._v(" "),t._m(149),t._m(150),t._v(" "),t._m(151),t._v(" "),t._m(152),t._m(153),t._v(" "),t._m(154)])},n,!1,null,null,null);a.default=o.exports}}]);