<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Spring Boot | Core Spring Memo</title>
    <meta name="description" content="Spring Framework 5.x / Spring Boot 2.x">
    <link rel="icon" href="/core-spring-memo/hero.jpg">
  <link rel="manifest" href="/core-spring-memo/manifest.json">
    
    <link rel="preload" href="/core-spring-memo/assets/css/0.styles.32f8bd5f.css" as="style"><link rel="preload" href="/core-spring-memo/assets/js/app.7245249f.js" as="script"><link rel="preload" href="/core-spring-memo/assets/js/8.ec5cc1b2.js" as="script"><link rel="prefetch" href="/core-spring-memo/assets/js/2.cae9966d.js"><link rel="prefetch" href="/core-spring-memo/assets/js/3.09f2a115.js"><link rel="prefetch" href="/core-spring-memo/assets/js/4.76af93b9.js"><link rel="prefetch" href="/core-spring-memo/assets/js/5.eba90cab.js"><link rel="prefetch" href="/core-spring-memo/assets/js/6.6630b6fb.js"><link rel="prefetch" href="/core-spring-memo/assets/js/7.fc41fda9.js"><link rel="prefetch" href="/core-spring-memo/assets/js/9.b78637f3.js"><link rel="prefetch" href="/core-spring-memo/assets/js/10.95af7e53.js"><link rel="prefetch" href="/core-spring-memo/assets/js/11.1fc4559b.js"><link rel="prefetch" href="/core-spring-memo/assets/js/12.c0a2b137.js"><link rel="prefetch" href="/core-spring-memo/assets/js/13.d6caf056.js"><link rel="prefetch" href="/core-spring-memo/assets/js/14.b0efae09.js">
    <link rel="stylesheet" href="/core-spring-memo/assets/css/0.styles.32f8bd5f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/core-spring-memo/" class="home-link router-link-active"><!----><span class="site-name">
      Core Spring Memo
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/core-spring-memo/" class="nav-link">Home</a></div><div class="nav-item"><a href="/core-spring-memo/about/" class="nav-link">このページについて</a></div><div class="nav-item"><a href="/core-spring-memo/contents/" class="nav-link router-link-active">Springメモ</a></div><div class="nav-item"><a href="/core-spring-memo/handson/" class="nav-link">ハンズオン</a></div><a href="https://github.com/Imamachi-n/core-spring-memo" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/core-spring-memo/" class="nav-link">Home</a></div><div class="nav-item"><a href="/core-spring-memo/about/" class="nav-link">このページについて</a></div><div class="nav-item"><a href="/core-spring-memo/contents/" class="nav-link router-link-active">Springメモ</a></div><div class="nav-item"><a href="/core-spring-memo/handson/" class="nav-link">ハンズオン</a></div><a href="https://github.com/Imamachi-n/core-spring-memo" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Contents</span><!----></p><ul class="sidebar-group-items"><li><a href="/core-spring-memo/contents/" class="sidebar-link">はじめに</a></li><li><a href="/core-spring-memo/contents/1_di.html" class="sidebar-link">Spring Conteiner, Dependency Injection</a></li><li><a href="/core-spring-memo/contents/2_aop.html" class="sidebar-link">Aspect oriented programming</a></li><li><a href="/core-spring-memo/contents/3_data-management.html" class="sidebar-link">JDBC, Transactions, JPA, Spring Data</a></li><li><a href="/core-spring-memo/contents/4_spring-boot.html" class="active sidebar-link">Spring Boot</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/core-spring-memo/contents/4_spring-boot.html#spring-bootとはなにか" class="sidebar-link">Spring Bootとはなにか</a></li><li class="sidebar-sub-header"><a href="/core-spring-memo/contents/4_spring-boot.html#spring-bootを使う利点" class="sidebar-link">Spring Bootを使う利点</a></li><li class="sidebar-sub-header"><a href="/core-spring-memo/contents/4_spring-boot.html#spring-bootが独善的“opinionated”と言われる理由" class="sidebar-link">Spring Bootが独善的“opinionated”と言われる理由</a></li><li class="sidebar-sub-header"><a href="/core-spring-memo/contents/4_spring-boot.html#spring-bootの内部で何が行われているのか" class="sidebar-link">Spring Bootの内部で何が行われているのか</a></li><li class="sidebar-sub-header"><a href="/core-spring-memo/contents/4_spring-boot.html#spring-bootの落とし穴（spring-bootの設定に影響を与えるもの）" class="sidebar-link">Spring Bootの落とし穴（Spring Bootの設定に影響を与えるもの）</a></li><li class="sidebar-sub-header"><a href="/core-spring-memo/contents/4_spring-boot.html#spring-bootにおける設定情報の書き方" class="sidebar-link">Spring Bootにおける設定情報の書き方</a></li><li class="sidebar-sub-header"><a href="/core-spring-memo/contents/4_spring-boot.html#tomcat組み込みjarと従来のwar" class="sidebar-link">Tomcat組み込みJARと従来のWAR</a></li><li class="sidebar-sub-header"><a href="/core-spring-memo/contents/4_spring-boot.html#spring-bootがサポートしている組み込みサーバ" class="sidebar-link">Spring Bootがサポートしている組み込みサーバ</a></li><li class="sidebar-sub-header"><a href="/core-spring-memo/contents/4_spring-boot.html#springbootapplicationの意味" class="sidebar-link">@SpringBootApplicationの意味</a></li><li class="sidebar-sub-header"><a href="/core-spring-memo/contents/4_spring-boot.html#spring-bootにおけるcomponent-scanning" class="sidebar-link">Spring BootにおけるComponent Scanning</a></li><li class="sidebar-sub-header"><a href="/core-spring-memo/contents/4_spring-boot.html#spring-boot-starter-pomとは" class="sidebar-link">Spring Boot starter POMとは</a></li><li class="sidebar-sub-header"><a href="/core-spring-memo/contents/4_spring-boot.html#spring-bootにおけるロギング" class="sidebar-link">Spring Bootにおけるロギング</a></li><li class="sidebar-sub-header"><a href="/core-spring-memo/contents/4_spring-boot.html#spring-bootにおけるテスト" class="sidebar-link">Spring Bootにおけるテスト</a></li><li class="sidebar-sub-header"><a href="/core-spring-memo/contents/4_spring-boot.html#参照" class="sidebar-link">参照</a></li></ul></li><li><a href="/core-spring-memo/contents/5_mvc.html" class="sidebar-link">Spring MVC and the Web Layer</a></li><li><a href="/core-spring-memo/contents/6_security.html" class="sidebar-link">Security</a></li><li><a href="/core-spring-memo/contents/7_rest.html" class="sidebar-link">REST</a></li><li><a href="/core-spring-memo/contents/8_testing.html" class="sidebar-link">Testing</a></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="spring-boot"><a href="#spring-boot" aria-hidden="true" class="header-anchor">#</a> Spring Boot</h1><h2 id="spring-bootとはなにか"><a href="#spring-bootとはなにか" aria-hidden="true" class="header-anchor">#</a> Spring Bootとはなにか</h2><p>Spring BootはJava Configのかたまり。<br>
Spring BootのAuto Configurationのjarファイル内で、素のSpring Frameworkで自分で定義していたJava Configが事前に用意されている。
特定のクラスがclasspathにあると自動的にBean定義してくれる。</p><h2 id="spring-bootを使う利点"><a href="#spring-bootを使う利点" aria-hidden="true" class="header-anchor">#</a> Spring Bootを使う利点</h2><h3 id="従来のspring-frameworkでの開発"><a href="#従来のspring-frameworkでの開発" aria-hidden="true" class="header-anchor">#</a> 従来のSpring Frameworkでの開発</h3><ul><li>大量の設定（Java Configなど）を記述しなければならない。</li><li>結果として、なかなか実際のWeb開発に着手できない。</li></ul><h3 id="spring-bootを使った場合"><a href="#spring-bootを使った場合" aria-hidden="true" class="header-anchor">#</a> Spring Bootを使った場合</h3><p>Spring Bootでは、上記のSpring Frameworkの面倒くささを解消するために、予めおすすめの設定情報が記述されたJava Configクラスを用意してくれている。開発者は、設定情報を<code>application.properties</code>ファイルに記述していくだけでOK。</p><p>結果として、開発者が面倒な設定を（Java Configクラスとして）いちいち記述する必要がほとんどなくなり、すぐに実際の開発に着手できる。</p><h2 id="spring-bootが独善的“opinionated”と言われる理由"><a href="#spring-bootが独善的“opinionated”と言われる理由" aria-hidden="true" class="header-anchor">#</a> Spring Bootが独善的“opinionated”と言われる理由</h2><p>素のSpring Frameworkで用意していた設定情報（Java Configやアノテーションなど）は、アプリケーション設計時にある程度決まりきった設定が使われる事が多い。</p><p>Spring Bootでは、その決まりきった設定を予めJava Configファイルとして設定しており、必要なものだけがアプリケーション実行時にBeanインスタンスとして呼び出される仕組みになっている（これがSpring Bootが<strong>独善的</strong>と表現される理由）。</p><h2 id="spring-bootの内部で何が行われているのか"><a href="#spring-bootの内部で何が行われているのか" aria-hidden="true" class="header-anchor">#</a> Spring Bootの内部で何が行われているのか</h2><div class="tip custom-block"><p class="custom-block-title">重要</p><p>Spring Bootで設定をカスタマイズしたい場合、ソースコードの確認は重要です。</p></div><p>例えば、Spring JDBCを例に見てみる。<br>
Spring Bootを入れると<code>spring-boot-autoconfigure</code>というJARファイルがインポートされる。このJARファイル内で用意されている<code>JdbcTemplateAutoConfiguration</code>クラスを見てみる。</p><p><img src="/core-spring-memo/assets/img/C002_4_Boot_JAR.06a7ae86.png" alt="C002_4_Boot_JAR.png"></p><p>クラスについているアノテーションを見てみると、<code>@ConditionalOnClass</code>アノテーションがついている。これは、<code>DataSource.class</code>と<code>JdbcTemplate.class</code>にclasspathが通っていると、このクラスがBeanインスタンス化されるという設定になっていることを意味している。</p><p>また、jdbcTemplateメソッドでは、各種設定情報がsetterで設定されている事がわかる。これは、Spring Bootでの設定ファイルである<code>application.properties</code>内で設定された値が、Getterメソッドで読み込まれ、Setterメソッドによって、実際のSpring Frameworkの設定として読み込まれる。</p><div class="language-java extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><div class="highlighted"> </div><br><br><br><br><br><br><br></div><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>DataSource<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> JdbcTemplate<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnSingleCandidate</span><span class="token punctuation">(</span>DataSource<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureAfter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>DataSourceAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token punctuation">{</span>JdbcProperties<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JdbcTemplateAutoConfiguration</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">JdbcTemplateAutoConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Configuration</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">JdbcTemplateConfiguration</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">final</span> DataSource dataSource<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">final</span> JdbcProperties properties<span class="token punctuation">;</span>

        <span class="token function">JdbcTemplateConfiguration</span><span class="token punctuation">(</span>DataSource dataSource<span class="token punctuation">,</span> JdbcProperties properties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>dataSource <span class="token operator">=</span> dataSource<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>properties <span class="token operator">=</span> properties<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Bean</span>
        <span class="token annotation punctuation">@Primary</span>
        <span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token punctuation">{</span>JdbcOperations<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">public</span> JdbcTemplate <span class="token function">jdbcTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            JdbcTemplate jdbcTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JdbcTemplate</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
            Template template <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token function">getTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            jdbcTemplate<span class="token punctuation">.</span><span class="token function">setFetchSize</span><span class="token punctuation">(</span>template<span class="token punctuation">.</span><span class="token function">getFetchSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            jdbcTemplate<span class="token punctuation">.</span><span class="token function">setMaxRows</span><span class="token punctuation">(</span>template<span class="token punctuation">.</span><span class="token function">getMaxRows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>template<span class="token punctuation">.</span><span class="token function">getQueryTimeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                jdbcTemplate<span class="token punctuation">.</span><span class="token function">setQueryTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>template<span class="token punctuation">.</span><span class="token function">getQueryTimeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">return</span> jdbcTemplate<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以下に、Spring Bootのソースコード中に出現するアノテーションをまとめた。</p><table><thead><tr><th>アノテーション</th><th>説明</th></tr></thead><tbody><tr><td>@ConditionalOnClass</td><td>指定したクラスがクラスパス上に存在すれば有効化</td></tr><tr><td>@ConditionalOnBean</td><td>指定したBeanがコンテナに存在すれば有効化</td></tr><tr><td>@ConditionalOnMissingBean</td><td>指定したBeanがコンテナに存在しなければ有効化</td></tr><tr><td>@ConditionalOnProperty</td><td>指定したプロパティがapplication.propertiesに設定されていれば有効化</td></tr><tr><td>@ConditionalOnWebApplication</td><td>Webアプリケーションであれば有効化</td></tr><tr><td>@AutoConfigureAfter/@AutoConfigureBefore</td><td>指定したAutoConfigurationの前/後に読み込む</td></tr></tbody></table><h2 id="spring-bootの落とし穴（spring-bootの設定に影響を与えるもの）"><a href="#spring-bootの落とし穴（spring-bootの設定に影響を与えるもの）" aria-hidden="true" class="header-anchor">#</a> Spring Bootの落とし穴（Spring Bootの設定に影響を与えるもの）</h2><p>上述したとおり、Spring Bootは事前にJava Configクラスを定義しており、必要に応じてそれらをBeanインスタンス化し、Springのコンテナ内で管理している。では、独自にBeanを定義したり、アノテーション（@EnableXxx系のアノテーション）による設定を行った場合どうなるか？</p><p>設定をミスると、Spring Bootが動かなくなる…。</p><h3 id="spring-bootで避けたい事項"><a href="#spring-bootで避けたい事項" aria-hidden="true" class="header-anchor">#</a> Spring Bootで避けたい事項</h3><ul><li>フレームワークを動かすBeanは、なるべく自前で定義しないこと</li><li>@EnableXxxはクラスになるべく付けないこと</li></ul><p>上記の内容を起こった結果、（表向きは）理由のわからないエラーでSpring Bootが動かなくなりがち（初心者あるある）。<br>
ブログ記事でも、間違った記述が散見されるため、カスタマイズを行いたい場合は基本的に公式の資料やSpring BootのAutoConfigurationのソースコードを確認の上実行。</p><h3 id="spring-bootの設定を変更したい場合"><a href="#spring-bootの設定を変更したい場合" aria-hidden="true" class="header-anchor">#</a> Spring Bootの設定を変更したい場合</h3><ol><li><code>application.properties</code>で設定<br>
だいたいこれで解決できるはず。</li></ol><div class="language- extra-class"><pre class="language-text"><code>spring.datasource.url=jdbc:mysql://localhost/test
spring.datasource.username=dbuser
spring.datasource.password=dbpass
spring.datasource.driver-class-name=com.mysql.jdbc.Driver
spring.datasource.schema=/testdb/schema.sql
spring.datasource.data=/testdb/data.sql

logging.level.root=INFO
server.port=8081
spring.jpa.show-sql=true
</code></pre></div><p>どういった内容を設定できるかは、Spring Bootの公式リファレンスを参照のこと。<br><a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#common-application-properties" target="_blank" rel="noopener noreferrer">Spring Boot Reference Guide - Appendix A. Common application properties<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><ol start="2"><li>Spring Boot側で設定されているBeanをDIで取得して、Setterで設定を登録</li></ol><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JdbcTemplateCustomConfiguration</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> JdbcTemplateConfiguration jdbcConfig<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token function">JdbcTemplateCustomConfiguration</span><span class="token punctuation">(</span>JdbcTemplateConfiguration jdbcConfig<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>jdbcConfig <span class="token operator">=</span> jdbcConfig<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@PostConstruct</span>    <span class="token comment">// Beanインスタンス化の後に実行</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        jdbcConfig<span class="token punctuation">.</span><span class="token function">setXxx</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 設定したい内容を指定</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>補助的なBeanを定義してSpringのコンテナに登録<br>
ThymeleafにDialectを追加する例。</li></ol><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyThymeleafConfiguration</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> FooDialect <span class="token function">fooDialect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">FooDialect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> BarDialect <span class="token function">barDialect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">barDIalect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上記の内容は以下の資料を参考にした。<br><a href="https://www.slideshare.net/masatoshitada7/spring-boot-jjug" target="_blank" rel="noopener noreferrer">Spring Bootの本当の理解ポイント<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><h2 id="spring-bootにおける設定情報の書き方"><a href="#spring-bootにおける設定情報の書き方" aria-hidden="true" class="header-anchor">#</a> Spring Bootにおける設定情報の書き方</h2><p><code>application.properties</code>もしくは<code>application.yml</code>に記述する。</p><p>どういった内容を設定できるかは、Spring Bootの公式リファレンスを参照のこと。<br><a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#common-application-properties" target="_blank" rel="noopener noreferrer">Spring Boot Reference Guide - Appendix A. Common application properties<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>以下に例を示す。</p><h3 id="_1-application-properties"><a href="#_1-application-properties" aria-hidden="true" class="header-anchor">#</a> 1. application.properties</h3><p>ただのTextファイルなので、１行ずつ設定情報を記載する形となる。</p><div class="language- extra-class"><pre class="language-text"><code>database.host = localhost
database.user = admin
</code></pre></div><h3 id="_2-application-yml"><a href="#_2-application-yml" aria-hidden="true" class="header-anchor">#</a> 2. application.yml</h3><p>YAMLファイルとして記述できるので、情報を階層化して表現することができる。</p><div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">database</span><span class="token punctuation">:</span>
  <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
  <span class="token key atrule">user</span><span class="token punctuation">:</span> admin
</code></pre></div><p>開発用と本番用に設定を分けることもできる。</p><div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">logging.level</span><span class="token punctuation">:</span>
<span class="token key atrule">org.springframework</span><span class="token punctuation">:</span> INFO
<span class="token punctuation">---</span>
<span class="token key atrule">spring.profiles</span><span class="token punctuation">:</span> development
<span class="token key atrule">database</span><span class="token punctuation">:</span>
<span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
<span class="token key atrule">user</span><span class="token punctuation">:</span> dev
<span class="token punctuation">---</span>
<span class="token key atrule">spring.profiles</span><span class="token punctuation">:</span> production
<span class="token key atrule">database</span><span class="token punctuation">:</span>
<span class="token key atrule">host</span><span class="token punctuation">:</span> 198.18.200.9
<span class="token key atrule">user</span><span class="token punctuation">:</span> admin
</code></pre></div><h2 id="tomcat組み込みjarと従来のwar"><a href="#tomcat組み込みjarと従来のwar" aria-hidden="true" class="header-anchor">#</a> Tomcat組み込みJARと従来のWAR</h2><p>Spring Bootでは、Tomcat組み込みJARと従来のWARの両方をサポートしている（両者に性能面で違いはない）。</p><h3 id="_1-tomcat組み込みjar"><a href="#_1-tomcat組み込みjar" aria-hidden="true" class="header-anchor">#</a> 1. Tomcat組み込みJAR</h3><p>Spring Bootでは、標準ではTomcatを内部に組み込んだJARファイル（ファイルサイズが大きいのでFat JARと呼ばれる）をビルド成果物として生成する。
一方で、jar.originalには自分のソースコードしか入っていない、従来のJARファイルになる。</p><div class="language- extra-class"><pre class="language-text"><code>22M yourapp-0.0.1-SNAPSHOT.jar
5K  yourapp-0.0.1-SNAPSHOT.jar.original
</code></pre></div><p>クラウド環境では、組み込みサーバが推奨となっている。<br>
クラウド向けアプリの指針である12-Factor applications #7で謳われている。<br><a href="https://12factor.net/" target="_blank" rel="noopener noreferrer">12-Factor applications<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><h3 id="_2-従来のwar"><a href="#_2-従来のwar" aria-hidden="true" class="header-anchor">#</a> 2. 従来のWAR</h3><p>一方で、Tomcatを同梱していない従来型のWARファイルも出力させることができる。<br>
WARファイルを出力したい場合は、以下の設定を行う。</p><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token keyword">extends</span> <span class="token class-name">SpringBootServletInitializer</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> SpringApplicationBuilder <span class="token function">configure</span><span class="token punctuation">(</span>SpringApplicationBuilder application<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> application<span class="token punctuation">.</span><span class="token function">sources</span><span class="token punctuation">(</span>Application<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>JARとWARファイルを両方出力したい場合は、以下の設定を行う。</p><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token keyword">extends</span> <span class="token class-name">SpringBootServletInitializer</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> SpringApplicationBuilder <span class="token function">configure</span><span class="token punctuation">(</span>SpringApplicationBuilder application<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> application<span class="token punctuation">.</span><span class="token function">sources</span><span class="token punctuation">(</span>Application<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        SpringApplication<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>Application<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>あと、<code>pom.xml</code>で<code>spring-boot-starter-tomcat</code>でscopeを<code>provided</code>を設定する。</p><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-tomcat<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="spring-bootがサポートしている組み込みサーバ"><a href="#spring-bootがサポートしている組み込みサーバ" aria-hidden="true" class="header-anchor">#</a> Spring Bootがサポートしている組み込みサーバ</h2><p>デフォルトは、Tomcatサーバ。その他にも以下のサーバに対応。</p><ol><li>Tomcat</li><li>Jetty</li><li>Undertow</li></ol><p><code>pom.xml</code>での設定方法は以下の通り。<br>
以下では、Tomcatサーバを除外して、Jettyサーバを組み込んでいます。</p><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-tomcat<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-jetty<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="springbootapplicationの意味"><a href="#springbootapplicationの意味" aria-hidden="true" class="header-anchor">#</a> @SpringBootApplicationの意味</h2><p><code>@SpringBootApplication</code>は、以下の３つのアノテーションと同義。</p><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ComponentScan</span>
<span class="token annotation punctuation">@EnableAutoConfiguration</span>
</code></pre></div><p>つまり、@SpringBootApplicationを指定することで、自身のクラスの配置されているパッケージをルートとしてコンポーネントスキャンを実行し、Java Configを読み込んでいる。</p><p>また、AutoConfiguration機能により、classpathの通っているものを対象としたJava Configを有効化し、Beanインスタンスを生成している。</p><h2 id="spring-bootにおけるcomponent-scanning"><a href="#spring-bootにおけるcomponent-scanning" aria-hidden="true" class="header-anchor">#</a> Spring BootにおけるComponent Scanning</h2><p>例えば、<code>transfers</code>パッケージ以下をコンポーネントスキャンしたい場合、以下のように設定する。</p><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span><span class="token punctuation">(</span>scanBasePackages<span class="token operator">=</span><span class="token string">&quot;transfers&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>もしくは、</p><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootConfiguration</span>
<span class="token annotation punctuation">@EnableAutoConfiguration</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token string">&quot;transfers&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="spring-boot-starter-pomとは"><a href="#spring-boot-starter-pomとは" aria-hidden="true" class="header-anchor">#</a> Spring Boot starter POMとは</h2><p>Spring Bootにおける<code>pom.xml</code>の設定について説明する。<br>
ベースとなるSpring Bootに必要なライブラリは、parentタグで<code>spring-boot-starter-parent</code>と使用するバージョンを指定する。</p><p>このstarterでは依存関係にある多くのライブラリを読み込む。<br>
dependenciesタグ内で、その他に必要なライブラリを指定し、読み込む。このとき、parentタグ側でバージョンが指定されているため、そのバージョンに合わせたライブラリを読み込んでくれる（こちら側で指定する必要なし）。</p><p>いかに具体的な例を示す（Mavenの場合）。</p><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.0.3.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-jpa<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.h2database<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>h2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="spring-bootにおけるロギング"><a href="#spring-bootにおけるロギング" aria-hidden="true" class="header-anchor">#</a> Spring Bootにおけるロギング</h2><h2 id="spring-bootにおけるテスト"><a href="#spring-bootにおけるテスト" aria-hidden="true" class="header-anchor">#</a> Spring Bootにおけるテスト</h2><p>JUnitテストクラスにおいて、<code>@SpringBootTest(classes=XxxAplication.class)</code>アノテーションをつける。</p><p>いかに例を示す。</p><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@ExtendWith</span><span class="token punctuation">(</span>SpringExtension<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootTest</span><span class="token punctuation">(</span>classes<span class="token operator">=</span>Application<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TransferServiceTests</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> TransferService transferService<span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">successfulTransfer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        TransferConfirmation conf <span class="token operator">=</span> transferService<span class="token punctuation">.</span> <span class="token function">transfer</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 処理を書く</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="参照"><a href="#参照" aria-hidden="true" class="header-anchor">#</a> 参照</h2><p><a href="https://www.slideshare.net/masatoshitada7/spring-boot-jjug" target="_blank" rel="noopener noreferrer">Spring Bootの本当の理解ポイント<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/Imamachi-n/core-spring-memo/edit/master/docs/contents/4_spring-boot.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="last-updated"><span class="prefix">Last Updated: </span><span class="time">7/22/2018, 7:30:39 AM</span></div></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/core-spring-memo/contents/3_data-management.html" class="prev">
          JDBC, Transactions, JPA, Spring Data
        </a></span><span class="next"><a href="/core-spring-memo/contents/5_mvc.html">
          Spring MVC and the Web Layer
        </a> →
      </span></p></div></div></div></div>
    <script src="/core-spring-memo/assets/js/8.ec5cc1b2.js" defer></script><script src="/core-spring-memo/assets/js/app.7245249f.js" defer></script>
  </body>
</html>
